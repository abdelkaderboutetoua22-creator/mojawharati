<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Ù…ØªØ¬Ø±Ù†Ø§ - Ø£ÙØ¶Ù„ Ù…ØªØ¬Ø± Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙÙŠ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <title>Ù…ØªØ¬Ø±Ù†Ø§ - ØªØ³ÙˆÙ‚ Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†</title>
    
    <!-- Google Analytics -->
    <script id="ga-script"></script>
    <script>
        function initGoogleAnalytics(measurementId) {
            if (!measurementId) return;
            const script = document.getElementById('ga-script');
            script.src = `https://www.googletagmanager.com/gtag/js?id=${measurementId}`;
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            window.gtag = gtag;
            gtag('js', new Date());
            gtag('config', measurementId);
        }
    </script>

    <!-- Facebook Pixel -->
    <script>
        function initFacebookPixel(pixelId) {
            if (!pixelId) return;
            !function(f,b,e,v,n,t,s)
            {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
            n.callMethod.apply(n,arguments):n.queue.push(arguments)};
            if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
            n.queue=[];t=b.createElement(e);t.async=!0;
            t.src=v;s=b.getElementsByTagName(e)[0];
            s.parentNode.insertBefore(t,s)}(window, document,'script',
            'https://connect.facebook.net/en_US/fbevents.js');
            fbq('init', pixelId);
            fbq('track', 'PageView');
        }
        
        // Facebook Pixel Events
        function fbTrackViewContent(product) {
            if (typeof fbq === 'undefined') return;
            fbq('track', 'ViewContent', {
                content_name: product.name,
                content_ids: [product.id],
                content_type: 'product',
                value: product.price,
                currency: 'DZD'
            });
        }
        
        function fbTrackAddToCart(product, quantity) {
            if (typeof fbq === 'undefined') return;
            fbq('track', 'AddToCart', {
                content_name: product.name,
                content_ids: [product.id],
                content_type: 'product',
                value: product.price * quantity,
                currency: 'DZD'
            });
        }
        
        function fbTrackInitiateCheckout(cart, total) {
            if (typeof fbq === 'undefined') return;
            fbq('track', 'InitiateCheckout', {
                content_ids: cart.map(item => item.id),
                content_type: 'product',
                num_items: cart.reduce((sum, item) => sum + item.quantity, 0),
                value: total,
                currency: 'DZD'
            });
        }
        
        function fbTrackPurchase(order) {
            if (typeof fbq === 'undefined') return;
            fbq('track', 'Purchase', {
                content_ids: order.items.map(item => item.id),
                content_type: 'product',
                num_items: order.items.reduce((sum, item) => sum + item.quantity, 0),
                value: order.total,
                currency: 'DZD'
            });
        }
    </script>

    <!-- TikTok Pixel -->
    <script>
        function initTikTokPixel(pixelId) {
            if (!pixelId) return;
            !function (w, d, t) {
                w.TiktokAnalyticsObject=t;var ttq=w[t]=w[t]||[];ttq.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],ttq.setAndDefer=function(t,e){t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}};for(var i=0;i<ttq.methods.length;i++)ttq.setAndDefer(ttq,ttq.methods[i]);ttq.instance=function(t){for(var e=ttq._i[t]||[],n=0;n<ttq.methods.length;n++)ttq.setAndDefer(e,ttq.methods[n]);return e},ttq.load=function(e,n){var i="https://analytics.tiktok.com/i18n/pixel/events.js";ttq._i=ttq._i||{},ttq._i[e]=[],ttq._i[e]._u=i,ttq._t=ttq._t||{},ttq._t[e]=+new Date,ttq._o=ttq._o||{},ttq._o[e]=n||{};var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=i+"?sdkid="+e+"&lib="+t;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(o,a)};
                ttq.load(pixelId);
                ttq.page();
            }(window, document, 'ttq');
        }
        
        // TikTok Pixel Events
        function ttTrackViewContent(product) {
            if (typeof ttq === 'undefined') return;
            ttq.track('ViewContent', {
                content_id: product.id,
                content_name: product.name,
                content_type: 'product',
                price: product.price,
                currency: 'DZD'
            });
        }
        
        function ttTrackAddToCart(product, quantity) {
            if (typeof ttq === 'undefined') return;
            ttq.track('AddToCart', {
                content_id: product.id,
                content_name: product.name,
                content_type: 'product',
                quantity: quantity,
                price: product.price,
                value: product.price * quantity,
                currency: 'DZD'
            });
        }
        
        function ttTrackInitiateCheckout(cart, total) {
            if (typeof ttq === 'undefined') return;
            ttq.track('InitiateCheckout', {
                content_type: 'product',
                quantity: cart.reduce((sum, item) => sum + item.quantity, 0),
                value: total,
                currency: 'DZD'
            });
        }
        
        function ttTrackCompletePayment(order) {
            if (typeof ttq === 'undefined') return;
            ttq.track('CompletePayment', {
                content_type: 'product',
                quantity: order.items.reduce((sum, item) => sum + item.quantity, 0),
                value: order.total,
                currency: 'DZD'
            });
        }
    </script>

    <!-- Google Analytics Events -->
    <script>
        function gaTrackViewItem(product) {
            if (typeof gtag === 'undefined') return;
            gtag('event', 'view_item', {
                currency: 'DZD',
                value: product.price,
                items: [{
                    item_id: product.id,
                    item_name: product.name,
                    price: product.price
                }]
            });
        }
        
        function gaTrackAddToCart(product, quantity) {
            if (typeof gtag === 'undefined') return;
            gtag('event', 'add_to_cart', {
                currency: 'DZD',
                value: product.price * quantity,
                items: [{
                    item_id: product.id,
                    item_name: product.name,
                    price: product.price,
                    quantity: quantity
                }]
            });
        }
        
        function gaTrackBeginCheckout(cart, total) {
            if (typeof gtag === 'undefined') return;
            gtag('event', 'begin_checkout', {
                currency: 'DZD',
                value: total,
                items: cart.map(item => ({
                    item_id: item.id,
                    item_name: item.name,
                    price: item.price,
                    quantity: item.quantity
                }))
            });
        }
        
        function gaTrackPurchase(order) {
            if (typeof gtag === 'undefined') return;
            gtag('event', 'purchase', {
                transaction_id: order.id,
                currency: 'DZD',
                value: order.total,
                shipping: order.deliveryPrice,
                items: order.items.map(item => ({
                    item_id: item.id,
                    item_name: item.name,
                    price: item.price,
                    quantity: item.quantity
                }))
            });
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700;800&display=swap');
        * { font-family: 'Cairo', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .gradient-btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .gradient-btn:hover { background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%); }
        .product-card:hover { transform: translateY(-8px); box-shadow: 0 25px 50px rgba(0,0,0,0.15); }
        .product-card { transition: all 0.3s ease; }
        .modal { transition: all 0.3s ease; }
        .modal.hidden { opacity: 0; pointer-events: none; }
        .slide-in { animation: slideIn 0.3s ease; }
        @keyframes slideIn { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .delivery-option.selected > div { border-color: #667eea; background: linear-gradient(135deg, #f0f4ff 0%, #e8e0ff 100%); }
        .category-btn.active { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        .cart-badge { animation: bounce 0.5s ease; }
        @keyframes bounce { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.3); } }
        .loading-spinner { border: 3px solid #f3f3f3; border-top: 3px solid #667eea; border-radius: 50%; width: 24px; height: 24px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .thumbnail { transition: all 0.3s ease; }
        .thumbnail:hover, .thumbnail.active { border-color: #667eea; transform: scale(1.05); }
        .zoom-image { transition: transform 0.3s ease; }
        .zoom-image:hover { transform: scale(1.1); }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-thumb { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 4px; }
        .notification { animation: slideInRight 0.5s ease; }
        @keyframes slideInRight { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        .feature-icon { transition: all 0.3s ease; }
        .feature-icon:hover { transform: scale(1.1); }
        .admin-tab.active { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        .image-preview { position: relative; }
        .image-preview .remove-btn { position: absolute; top: -8px; right: -8px; }
        .drag-over { border-color: #667eea !important; background-color: #f0f4ff !important; }
    </style>
</head>
<body class="bg-gray-50">

    <!-- Notification Container -->
    <div id="notificationContainer" class="fixed top-4 left-4 z-50 space-y-2"></div>

    <!-- Header -->
    <header class="gradient-bg sticky top-0 z-40 shadow-lg">
        <div class="max-w-7xl mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3 cursor-pointer" onclick="showPage('home')">
                    <div class="w-12 h-12 bg-white rounded-xl flex items-center justify-center shadow-lg">
                        <i class="fas fa-store text-2xl text-purple-600"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-white">Ù…ØªØ¬Ø±Ù†Ø§</h1>
                        <p class="text-purple-200 text-xs">ØªØ³ÙˆÙ‚ Ø¨Ø«Ù‚Ø©</p>
                    </div>
                </div>

                <div class="hidden md:flex flex-1 max-w-md mx-8">
                    <div class="relative w-full">
                        <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬..." 
                            class="w-full px-4 py-2 pr-10 rounded-xl border-0 focus:ring-2 focus:ring-purple-300">
                        <i class="fas fa-search absolute right-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                    </div>
                </div>

                <div class="flex items-center gap-4">
                    <button onclick="showPage('track')" class="text-white text-xl hover:scale-110 transition-transform" title="ØªØªØ¨Ø¹ Ø§Ù„Ø·Ù„Ø¨">
                        <i class="fas fa-truck"></i>
                    </button>
                    <button onclick="openCart()" class="relative text-white text-xl hover:scale-110 transition-transform">
                        <i class="fas fa-shopping-cart"></i>
                        <span id="cartCount" class="cart-badge absolute -top-2 -left-2 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center hidden">0</span>
                    </button>
                    <button onclick="showAdminLogin()" class="text-white text-xl hover:scale-110 transition-transform" title="Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…">
                        <i class="fas fa-user-shield"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main id="mainContent">
        <!-- Home Page -->
        <div id="homePage">
            <!-- Hero Section -->
            <section class="gradient-bg py-12 md:py-20">
                <div class="max-w-7xl mx-auto px-4 text-center">
                    <h2 class="text-3xl md:text-5xl font-bold text-white mb-4">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ù…ØªØ¬Ø±Ù†Ø§</h2>
                    <p class="text-purple-200 text-lg md:text-xl mb-8">Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± - Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</p>
                    <div class="flex flex-wrap justify-center gap-4">
                        <div class="bg-white/20 backdrop-blur rounded-xl px-6 py-3 text-white">
                            <i class="fas fa-truck ml-2"></i>ØªÙˆØµÙŠÙ„ Ù„ÙƒÙ„ Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª
                        </div>
                        <div class="bg-white/20 backdrop-blur rounded-xl px-6 py-3 text-white">
                            <i class="fas fa-money-bill-wave ml-2"></i>Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…
                        </div>
                        <div class="bg-white/20 backdrop-blur rounded-xl px-6 py-3 text-white">
                            <i class="fas fa-shield-alt ml-2"></i>Ø¶Ù…Ø§Ù† Ø§Ù„Ø¬ÙˆØ¯Ø©
                        </div>
                    </div>
                </div>
            </section>

            <!-- Categories -->
            <section class="py-6 bg-white shadow-sm sticky top-[72px] z-30">
                <div class="max-w-7xl mx-auto px-4">
                    <div class="flex gap-3 overflow-x-auto pb-2">
                        <button class="category-btn active flex-shrink-0 px-5 py-2 rounded-full border-2 border-purple-500 font-semibold transition-all" data-category="all">
                            <i class="fas fa-th-large ml-2"></i>Ø§Ù„ÙƒÙ„
                        </button>
                        <button class="category-btn flex-shrink-0 px-5 py-2 rounded-full border-2 border-gray-200 font-semibold transition-all hover:border-purple-500" data-category="electronics">
                            <i class="fas fa-mobile-alt ml-2"></i>Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª
                        </button>
                        <button class="category-btn flex-shrink-0 px-5 py-2 rounded-full border-2 border-gray-200 font-semibold transition-all hover:border-purple-500" data-category="fashion">
                            <i class="fas fa-tshirt ml-2"></i>Ù…Ù„Ø§Ø¨Ø³
                        </button>
                        <button class="category-btn flex-shrink-0 px-5 py-2 rounded-full border-2 border-gray-200 font-semibold transition-all hover:border-purple-500" data-category="beauty">
                            <i class="fas fa-spa ml-2"></i>Ø¬Ù…Ø§Ù„
                        </button>
                        <button class="category-btn flex-shrink-0 px-5 py-2 rounded-full border-2 border-gray-200 font-semibold transition-all hover:border-purple-500" data-category="home">
                            <i class="fas fa-home ml-2"></i>Ø§Ù„Ù…Ù†Ø²Ù„
                        </button>
                    </div>
                </div>
            </section>

            <!-- Products Grid -->
            <section class="py-8">
                <div class="max-w-7xl mx-auto px-4">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-2xl font-bold text-gray-800">
                            <i class="fas fa-fire text-orange-500 ml-2"></i>Ù…Ù†ØªØ¬Ø§ØªÙ†Ø§
                        </h3>
                        <span id="productCount" class="text-gray-500 text-sm"></span>
                    </div>
                    <div id="productsGrid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6"></div>
                </div>
            </section>

            <!-- Features -->
            <section class="py-12 bg-white">
                <div class="max-w-7xl mx-auto px-4">
                    <h3 class="text-2xl font-bold text-center text-gray-800 mb-10">Ù„Ù…Ø§Ø°Ø§ ØªØ®ØªØ§Ø±Ù†Ø§ØŸ</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                        <div class="text-center feature-icon">
                            <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-shipping-fast text-2xl text-purple-600"></i>
                            </div>
                            <h4 class="font-bold text-gray-800 mb-2">ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹</h4>
                            <p class="text-gray-500 text-sm">Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª</p>
                        </div>
                        <div class="text-center feature-icon">
                            <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-hand-holding-usd text-2xl text-green-600"></i>
                            </div>
                            <h4 class="font-bold text-gray-800 mb-2">Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</h4>
                            <p class="text-gray-500 text-sm">Ø¨Ø¯ÙˆÙ† Ù…Ø®Ø§Ø·Ø±</p>
                        </div>
                        <div class="text-center feature-icon">
                            <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-undo text-2xl text-blue-600"></i>
                            </div>
                            <h4 class="font-bold text-gray-800 mb-2">Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ù…Ø¬Ø§Ù†ÙŠ</h4>
                            <p class="text-gray-500 text-sm">Ø®Ù„Ø§Ù„ 7 Ø£ÙŠØ§Ù…</p>
                        </div>
                        <div class="text-center feature-icon">
                            <div class="w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-headset text-2xl text-orange-600"></i>
                            </div>
                            <h4 class="font-bold text-gray-800 mb-2">Ø¯Ø¹Ù… Ù…ØªÙˆØ§ØµÙ„</h4>
                            <p class="text-gray-500 text-sm">24/7</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Product Detail Page -->
        <div id="productPage" class="hidden py-8">
            <div class="max-w-7xl mx-auto px-4">
                <nav class="mb-6">
                    <ol class="flex items-center gap-2 text-sm text-gray-500">
                        <li><a href="#" onclick="showPage('home')" class="hover:text-purple-600">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
                        <li><i class="fas fa-chevron-left text-xs"></i></li>
                        <li id="productCategory" class="hover:text-purple-600 cursor-pointer">Ø§Ù„ØªØµÙ†ÙŠÙ</li>
                        <li><i class="fas fa-chevron-left text-xs"></i></li>
                        <li id="productBreadcrumb" class="text-purple-600 font-semibold">Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬</li>
                    </ol>
                </nav>

                <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
                    <div class="grid md:grid-cols-2 gap-8 p-6">
                        <div class="space-y-4">
                            <div class="relative overflow-hidden rounded-2xl bg-gray-100">
                                <img id="mainProductImage" src="" alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬" 
                                    class="w-full h-80 md:h-96 object-cover zoom-image cursor-zoom-in">
                                <div id="productBadge" class="absolute top-4 right-4 bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold"></div>
                                <div id="discountBadge" class="absolute top-4 left-4 bg-green-500 text-white px-3 py-1 rounded-full text-sm font-bold"></div>
                            </div>
                            <div id="thumbnailContainer" class="flex gap-3 overflow-x-auto pb-2"></div>
                        </div>

                        <div class="space-y-6">
                            <div>
                                <h1 id="productTitle" class="text-2xl md:text-3xl font-bold text-gray-800 mb-2"></h1>
                                <div class="flex items-center gap-2 mb-4">
                                    <div class="flex text-yellow-400">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star-half-alt"></i>
                                    </div>
                                    <span class="text-gray-500 text-sm">(4.5) - 120 ØªÙ‚ÙŠÙŠÙ…</span>
                                </div>
                            </div>

                            <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4">
                                <div class="flex items-center gap-4">
                                    <span id="productPrice" class="text-3xl font-bold text-green-600"></span>
                                    <span id="productOldPrice" class="text-xl text-gray-400 line-through"></span>
                                    <span id="productDiscount" class="bg-red-500 text-white text-sm px-2 py-1 rounded-full"></span>
                                </div>
                                <p class="text-green-600 text-sm mt-2"><i class="fas fa-check-circle ml-1"></i>Ù…ØªÙˆÙØ± ÙÙŠ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</p>
                            </div>

                            <div id="productDescription" class="text-gray-600 leading-relaxed"></div>

                            <div class="grid grid-cols-2 gap-3">
                                <div class="flex items-center gap-2 bg-gray-50 rounded-lg p-3">
                                    <i class="fas fa-truck text-purple-600"></i>
                                    <span class="text-sm">ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹</span>
                                </div>
                                <div class="flex items-center gap-2 bg-gray-50 rounded-lg p-3">
                                    <i class="fas fa-shield-alt text-green-600"></i>
                                    <span class="text-sm">Ø¶Ù…Ø§Ù† Ø§Ù„Ø¬ÙˆØ¯Ø©</span>
                                </div>
                                <div class="flex items-center gap-2 bg-gray-50 rounded-lg p-3">
                                    <i class="fas fa-undo text-blue-600"></i>
                                    <span class="text-sm">Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ù…Ø¬Ø§Ù†ÙŠ</span>
                                </div>
                                <div class="flex items-center gap-2 bg-gray-50 rounded-lg p-3">
                                    <i class="fas fa-money-bill-wave text-orange-600"></i>
                                    <span class="text-sm">Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</span>
                                </div>
                            </div>

                            <div class="flex items-center gap-4">
                                <span class="font-semibold text-gray-700">Ø§Ù„ÙƒÙ…ÙŠØ©:</span>
                                <div class="flex items-center border-2 border-gray-200 rounded-xl overflow-hidden">
                                    <button onclick="changeProductQty(-1)" class="px-4 py-2 bg-gray-100 hover:bg-gray-200 transition-colors text-lg font-bold">-</button>
                                    <span id="productQty" class="px-6 py-2 font-bold text-lg">1</span>
                                    <button onclick="changeProductQty(1)" class="px-4 py-2 bg-gray-100 hover:bg-gray-200 transition-colors text-lg font-bold">+</button>
                                </div>
                            </div>

                            <div class="flex gap-4">
                                <button onclick="buyNowFromProduct()" 
                                    class="flex-1 py-4 bg-gradient-to-r from-green-500 to-green-600 text-white font-bold text-lg rounded-xl hover:from-green-600 hover:to-green-700 transition-all shadow-lg flex items-center justify-center gap-2">
                                    <i class="fas fa-bolt"></i>
                                    Ø§Ø´ØªØ±ÙŠ Ø§Ù„Ø¢Ù†
                                </button>
                                <button onclick="addToCartFromProduct()" 
                                    class="flex-1 py-4 gradient-btn text-white font-bold text-lg rounded-xl transition-all shadow-lg flex items-center justify-center gap-2">
                                    <i class="fas fa-cart-plus"></i>
                                    Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©
                                </button>
                            </div>

                            <div class="flex items-center gap-4 pt-4 border-t">
                                <span class="text-gray-600">Ù…Ø´Ø§Ø±ÙƒØ©:</span>
                                <button onclick="shareProduct('facebook')" class="w-10 h-10 bg-blue-600 text-white rounded-full flex items-center justify-center hover:bg-blue-700">
                                    <i class="fab fa-facebook-f"></i>
                                </button>
                                <button onclick="shareProduct('whatsapp')" class="w-10 h-10 bg-green-500 text-white rounded-full flex items-center justify-center hover:bg-green-600">
                                    <i class="fab fa-whatsapp"></i>
                                </button>
                                <button onclick="shareProduct('twitter')" class="w-10 h-10 bg-sky-500 text-white rounded-full flex items-center justify-center hover:bg-sky-600">
                                    <i class="fab fa-twitter"></i>
                                </button>
                                <button onclick="copyProductLink()" class="w-10 h-10 bg-gray-500 text-white rounded-full flex items-center justify-center hover:bg-gray-600">
                                    <i class="fas fa-link"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="border-t">
                        <div class="flex border-b">
                            <button onclick="showTab('description')" class="tab-btn active px-6 py-4 font-semibold text-purple-600 border-b-2 border-purple-600">Ø§Ù„ÙˆØµÙ</button>
                            <button onclick="showTab('specs')" class="tab-btn px-6 py-4 font-semibold text-gray-500 hover:text-purple-600">Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª</button>
                            <button onclick="showTab('reviews')" class="tab-btn px-6 py-4 font-semibold text-gray-500 hover:text-purple-600">Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª</button>
                        </div>
                        <div id="tabContent" class="p-6"></div>
                    </div>
                </div>

                <div class="mt-12">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6">
                        <i class="fas fa-heart text-red-500 ml-2"></i>Ù…Ù†ØªØ¬Ø§Øª Ù…Ø´Ø§Ø¨Ù‡Ø©
                    </h3>
                    <div id="relatedProducts" class="grid grid-cols-2 md:grid-cols-4 gap-4"></div>
                </div>
            </div>
        </div>

        <!-- Track Order Page -->
        <div id="trackPage" class="hidden py-12">
            <div class="max-w-xl mx-auto px-4">
                <div class="bg-white rounded-2xl shadow-lg p-6">
                    <h2 class="text-2xl font-bold text-center mb-6">
                        <i class="fas fa-truck text-purple-600 ml-2"></i>ØªØªØ¨Ø¹ Ø·Ù„Ø¨Ùƒ
                    </h2>
                    <div class="space-y-4">
                        <input type="text" id="trackOrderId" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨" 
                            class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                        <input type="tel" id="trackPhone" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" dir="ltr"
                            class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none text-left">
                        <button onclick="trackOrder()" class="w-full py-3 gradient-btn text-white font-bold rounded-xl">
                            <i class="fas fa-search ml-2"></i>ØªØªØ¨Ø¹ Ø§Ù„Ø·Ù„Ø¨
                        </button>
                    </div>
                    <div id="trackResult" class="mt-6 hidden"></div>
                </div>
            </div>
        </div>

        <!-- Admin Page -->
        <div id="adminPage" class="hidden py-8">
            <div class="max-w-7xl mx-auto px-4">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold text-gray-800">
                        <i class="fas fa-tachometer-alt text-purple-600 ml-2"></i>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
                    </h2>
                    <div class="flex gap-2">
                        <button onclick="openSettings()" class="px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600">
                            <i class="fas fa-cog ml-2"></i>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
                        </button>
                        <button onclick="logoutAdmin()" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600">
                            <i class="fas fa-sign-out-alt ml-2"></i>Ø®Ø±ÙˆØ¬
                        </button>
                    </div>
                </div>

                <!-- Admin Tabs -->
                <div class="flex gap-2 mb-6 overflow-x-auto">
                    <button onclick="showAdminTab('orders')" class="admin-tab active px-6 py-3 rounded-xl font-semibold transition-all">
                        <i class="fas fa-shopping-bag ml-2"></i>Ø§Ù„Ø·Ù„Ø¨Ø§Øª
                    </button>
                    <button onclick="showAdminTab('products')" class="admin-tab px-6 py-3 rounded-xl font-semibold bg-white shadow transition-all">
                        <i class="fas fa-box ml-2"></i>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
                    </button>
                </div>

                <!-- Orders Tab -->
                <div id="ordersTab">
                    <!-- Stats -->
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                        <div class="bg-white rounded-xl p-4 shadow-md">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</p>
                                    <p id="statTotal" class="text-2xl font-bold text-gray-800">0</p>
                                </div>
                                <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-shopping-bag text-purple-600"></i>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-xl p-4 shadow-md">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm">Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</p>
                                    <p id="statPending" class="text-2xl font-bold text-yellow-600">0</p>
                                </div>
                                <div class="w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-clock text-yellow-600"></i>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-xl p-4 shadow-md">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm">ØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„</p>
                                    <p id="statDelivered" class="text-2xl font-bold text-green-600">0</p>
                                </div>
                                <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-check-circle text-green-600"></i>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-xl p-4 shadow-md">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</p>
                                    <p id="statRevenue" class="text-2xl font-bold text-blue-600">0</p>
                                </div>
                                <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-coins text-blue-600"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Orders Filter -->
                    <div class="bg-white rounded-xl p-4 shadow-md mb-6">
                        <div class="flex flex-wrap gap-4 items-center">
                            <select id="filterStatus" class="px-4 py-2 border rounded-lg" onchange="filterOrders()">
                                <option value="all">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª</option>
                                <option value="pending">Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</option>
                                <option value="confirmed">Ù…Ø¤ÙƒØ¯</option>
                                <option value="shipped">ØªÙ… Ø§Ù„Ø´Ø­Ù†</option>
                                <option value="delivered">ØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„</option>
                                <option value="cancelled">Ù…Ù„ØºÙŠ</option>
                            </select>
                            <input type="date" id="filterDate" class="px-4 py-2 border rounded-lg" onchange="filterOrders()">
                            <button onclick="exportOrders()" class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600">
                                <i class="fas fa-file-excel ml-2"></i>ØªØµØ¯ÙŠØ± Excel
                            </button>
                        </div>
                    </div>

                    <!-- Orders Table -->
                    <div class="bg-white rounded-xl shadow-md overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-4 py-3 text-right text-sm font-semibold text-gray-600">Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨</th>
                                        <th class="px-4 py-3 text-right text-sm font-semibold text-gray-600">Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
                                        <th class="px-4 py-3 text-right text-sm font-semibold text-gray-600">Ø§Ù„Ù…Ù†ØªØ¬</th>
                                        <th class="px-4 py-3 text-right text-sm font-semibold text-gray-600">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</th>
                                        <th class="px-4 py-3 text-right text-sm font-semibold text-gray-600">Ø§Ù„Ø­Ø§Ù„Ø©</th>
                                        <th class="px-4 py-3 text-right text-sm font-semibold text-gray-600">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                                        <th class="px-4 py-3 text-right text-sm font-semibold text-gray-600">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                                    </tr>
                                </thead>
                                <tbody id="ordersTableBody" class="divide-y divide-gray-100"></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Products Tab -->
                <div id="productsTab" class="hidden">
                    <!-- Add Product Button -->
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-bold text-gray-800">
                            <i class="fas fa-box text-purple-600 ml-2"></i>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
                        </h3>
                        <button onclick="openProductModal()" class="px-6 py-3 gradient-btn text-white rounded-xl font-semibold">
                            <i class="fas fa-plus ml-2"></i>Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯
                        </button>
                    </div>

                    <!-- Products Stats -->
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                        <div class="bg-white rounded-xl p-4 shadow-md">
                            <p class="text-gray-500 text-sm">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</p>
                            <p id="statProducts" class="text-2xl font-bold text-purple-600">0</p>
                        </div>
                        <div class="bg-white rounded-xl p-4 shadow-md">
                            <p class="text-gray-500 text-sm">Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª</p>
                            <p id="statElectronics" class="text-2xl font-bold text-blue-600">0</p>
                        </div>
                        <div class="bg-white rounded-xl p-4 shadow-md">
                            <p class="text-gray-500 text-sm">Ù…Ù„Ø§Ø¨Ø³</p>
                            <p id="statFashion" class="text-2xl font-bold text-pink-600">0</p>
                        </div>
                        <div class="bg-white rounded-xl p-4 shadow-md">
                            <p class="text-gray-500 text-sm">Ø£Ø®Ø±Ù‰</p>
                            <p id="statOther" class="text-2xl font-bold text-gray-600">0</p>
                        </div>
                    </div>

                    <!-- Products Grid -->
                    <div id="adminProductsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="gradient-bg py-10 mt-12">
        <div class="max-w-7xl mx-auto px-4">
            <div class="grid md:grid-cols-3 gap-8 text-white mb-8">
                <div>
                    <div class="flex items-center gap-3 mb-4">
                        <div class="w-10 h-10 bg-white rounded-lg flex items-center justify-center">
                            <i class="fas fa-store text-xl text-purple-600"></i>
                        </div>
                        <span class="text-xl font-bold">Ù…ØªØ¬Ø±Ù†Ø§</span>
                    </div>
                    <p class="text-purple-200">Ø£ÙØ¶Ù„ Ù…ØªØ¬Ø± Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙÙŠ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±</p>
                </div>
                <div>
                    <h4 class="font-bold text-lg mb-4">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</h4>
                    <div class="space-y-2 text-purple-200">
                        <p><i class="fas fa-phone ml-2"></i><span id="footerPhone">0555 12 34 56</span></p>
                        <p><i class="fas fa-envelope ml-2"></i><span id="footerEmail">contact@store.dz</span></p>
                    </div>
                </div>
                <div>
                    <h4 class="font-bold text-lg mb-4">ØªØ§Ø¨Ø¹Ù†Ø§</h4>
                    <div id="footerSocialLinks" class="flex flex-wrap gap-3">
                        <!-- Social links will be rendered dynamically -->
                    </div>
                </div>
            </div>
            <div class="border-t border-white/20 pt-6 text-center text-purple-200">
                <p>Â© 2024 Ù…ØªØ¬Ø±Ù†Ø§ - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
            </div>
        </div>
    </footer>

    <!-- Cart Modal -->
    <div id="cartModal" class="modal hidden fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50">
        <div class="bg-white rounded-2xl max-w-lg w-full max-h-[90vh] overflow-hidden slide-in">
            <div class="gradient-bg p-4 flex items-center justify-between">
                <h3 class="text-white font-bold text-lg"><i class="fas fa-shopping-cart ml-2"></i>Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚</h3>
                <button onclick="closeCart()" class="text-white hover:bg-white/20 rounded-full w-8 h-8 flex items-center justify-center">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="cartItems" class="p-4 max-h-[50vh] overflow-y-auto"></div>
            <div id="cartFooter" class="p-4 border-t bg-gray-50"></div>
        </div>
    </div>

    <!-- COD Order Modal -->
    <div id="orderModal" class="modal hidden fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50">
        <div class="bg-gray-100 rounded-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto slide-in">
            <div class="gradient-bg p-4 rounded-t-2xl flex items-center justify-between sticky top-0 z-10">
                <h3 class="text-white font-bold text-lg"><i class="fas fa-shopping-bag ml-2"></i>Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</h3>
                <button onclick="closeOrderModal()" class="text-white hover:bg-white/20 rounded-full w-8 h-8 flex items-center justify-center">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="p-4">
                <div class="bg-white rounded-xl overflow-hidden shadow-md">
                    <div id="orderProductSection" class="p-4 border-b"></div>

                    <form id="orderForm" class="p-4 space-y-4">
                        <div class="space-y-3">
                            <div class="flex items-center gap-2 text-gray-700 font-semibold">
                                <div class="w-7 h-7 bg-purple-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-user text-purple-600 text-xs"></i>
                                </div>
                                <span>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„</span>
                            </div>
                            <input type="text" id="customerName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ *" required
                                class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                            <input type="tel" id="customerPhone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ *" required dir="ltr"
                                class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none text-left"
                                pattern="[0-9]{10}" maxlength="10">
                            <input type="email" id="customerEmail" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)" dir="ltr"
                                class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none text-left">
                        </div>

                        <div class="space-y-3">
                            <div class="flex items-center gap-2 text-gray-700 font-semibold">
                                <div class="w-7 h-7 bg-green-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-map-marker-alt text-green-600 text-xs"></i>
                                </div>
                                <span>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙˆØµÙŠÙ„</span>
                            </div>
                            <select id="province" required class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none bg-white">
                                <option value="">-- Ø§Ø®ØªØ± Ø§Ù„ÙˆÙ„Ø§ÙŠØ© --</option>
                            </select>
                            <input type="text" id="municipality" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø¨Ù„Ø¯ÙŠØ© *" required
                                class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                            <input type="text" id="address" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø¨Ø§Ù„ØªÙØµÙŠÙ„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"
                                class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">

                            <div class="grid grid-cols-2 gap-3">
                                <label class="delivery-option cursor-pointer">
                                    <input type="radio" name="deliveryType" value="office" class="hidden" required>
                                    <div class="border-2 border-gray-200 rounded-xl p-3 text-center hover:border-purple-400 transition-all">
                                        <i class="fas fa-building text-orange-500 text-xl mb-1"></i>
                                        <div class="font-semibold text-gray-700 text-sm">Ù…ÙƒØªØ¨</div>
                                        <div class="text-purple-600 font-bold" id="officePrice">-- Ø¯Ø¬</div>
                                    </div>
                                </label>
                                <label class="delivery-option cursor-pointer">
                                    <input type="radio" name="deliveryType" value="home" class="hidden">
                                    <div class="border-2 border-gray-200 rounded-xl p-3 text-center hover:border-purple-400 transition-all">
                                        <i class="fas fa-home text-green-500 text-xl mb-1"></i>
                                        <div class="font-semibold text-gray-700 text-sm">Ø§Ù„Ù…Ù†Ø²Ù„</div>
                                        <div class="text-purple-600 font-bold" id="homePrice">-- Ø¯Ø¬</div>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 border border-purple-100">
                            <div id="orderSummaryItems" class="space-y-2 text-sm"></div>
                            <div class="border-t border-purple-200 pt-2 mt-2">
                                <div class="flex items-center justify-between">
                                    <span class="font-bold text-gray-800">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:</span>
                                    <span class="text-xl font-bold text-purple-600" id="orderTotal">0 Ø¯Ø¬</span>
                                </div>
                            </div>
                        </div>

                        <button type="submit" id="submitOrderBtn"
                            class="w-full py-4 bg-gradient-to-r from-green-500 to-green-600 text-white font-bold text-lg rounded-xl hover:from-green-600 hover:to-green-700 transition-all shadow-lg flex items-center justify-center gap-2">
                            <i class="fas fa-check-circle"></i>
                            ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨
                        </button>

                        <div class="flex items-center justify-center gap-4 pt-2 text-xs text-gray-500">
                            <span><i class="fas fa-lock text-green-500 ml-1"></i>Ø¢Ù…Ù†</span>
                            <span><i class="fas fa-undo text-blue-500 ml-1"></i>Ø§Ø³ØªØ±Ø¬Ø§Ø¹</span>
                            <span><i class="fas fa-headset text-purple-500 ml-1"></i>Ø¯Ø¹Ù…</span>
                        </div>
                    </form>

                    <div id="orderSuccess" class="hidden p-8 text-center">
                        <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-check text-green-500 text-4xl"></i>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800 mb-2">ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­! ğŸ‰</h3>
                        <p class="text-gray-600 mb-2">Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨: <span id="orderNumber" class="font-bold text-purple-600"></span></p>
                        <p class="text-gray-500 text-sm mb-4">Ø³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹</p>
                        <div id="orderConfirmationDetails" class="bg-gray-50 rounded-xl p-4 text-right text-sm mb-4"></div>
                        <button onclick="closeOrderModal()" class="px-6 py-2 gradient-btn text-white rounded-xl">
                            Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„ØªØ³ÙˆÙ‚
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Login Modal -->
    <div id="adminLoginModal" class="modal hidden fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50">
        <div class="bg-white rounded-2xl max-w-sm w-full p-6 slide-in">
            <h3 class="text-xl font-bold text-center mb-6"><i class="fas fa-lock text-purple-600 ml-2"></i>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h3>
            <form id="adminLoginForm" class="space-y-4">
                <input type="password" id="adminPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" required
                    class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                <button type="submit" class="w-full py-3 gradient-btn text-white font-bold rounded-xl">
                    Ø¯Ø®ÙˆÙ„
                </button>
            </form>
            <button onclick="closeAdminLogin()" class="w-full mt-4 py-2 text-gray-500 hover:text-gray-700">Ø¥Ù„ØºØ§Ø¡</button>
        </div>
    </div>

    <!-- Order Details Modal -->
    <div id="orderDetailsModal" class="modal hidden fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50">
        <div class="bg-white rounded-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto slide-in">
            <div class="gradient-bg p-4 flex items-center justify-between sticky top-0">
                <h3 class="text-white font-bold text-lg"><i class="fas fa-info-circle ml-2"></i>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨</h3>
                <button onclick="closeOrderDetails()" class="text-white hover:bg-white/20 rounded-full w-8 h-8 flex items-center justify-center">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="orderDetailsContent" class="p-4"></div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal hidden fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50">
        <div class="bg-white rounded-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto slide-in">
            <div class="gradient-bg p-4 flex items-center justify-between sticky top-0">
                <h3 class="text-white font-bold text-lg"><i class="fas fa-cog ml-2"></i>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØªØ¬Ø±</h3>
                <button onclick="closeSettings()" class="text-white hover:bg-white/20 rounded-full w-8 h-8 flex items-center justify-center">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="p-4 space-y-6">
                <div class="space-y-3">
                    <h4 class="font-bold text-gray-800"><i class="fas fa-store ml-2 text-purple-600"></i>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ØªØ¬Ø±</h4>
                    <input type="text" id="settingStoreName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø±" 
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                    <input type="tel" id="settingPhone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" dir="ltr"
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none text-left">
                    <input type="email" id="settingEmail" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" dir="ltr"
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none text-left">
                    <input type="text" id="settingWhatsapp" placeholder="Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ (Ù…Ø¹ Ø±Ù…Ø² Ø§Ù„Ø¯ÙˆÙ„Ø©)" dir="ltr"
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none text-left">
                </div>

                <div class="space-y-3">
                    <h4 class="font-bold text-gray-800"><i class="fas fa-envelope ml-2 text-purple-600"></i>Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø¨Ø±ÙŠØ¯ (EmailJS)</h4>
                    <input type="text" id="settingEmailJsKey" placeholder="EmailJS Public Key" dir="ltr"
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none text-left">
                    <input type="text" id="settingEmailJsService" placeholder="EmailJS Service ID" dir="ltr"
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none text-left">
                    <input type="text" id="settingEmailJsTemplate" placeholder="EmailJS Template ID" dir="ltr"
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none text-left">
                </div>

                <div class="space-y-3">
                    <h4 class="font-bold text-gray-800"><i class="fas fa-table ml-2 text-green-600"></i>Google Sheets</h4>
                    <input type="text" id="settingSheetUrl" placeholder="Ø±Ø§Ø¨Ø· Google Apps Script Web App" dir="ltr"
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none text-left">
                </div>

                <div class="space-y-3">
                    <h4 class="font-bold text-gray-800"><i class="fab fa-facebook ml-2 text-blue-600"></i>Facebook Pixel</h4>
                    <input type="text" id="settingFacebookPixel" placeholder="Facebook Pixel ID (Ù…Ø«Ø§Ù„: 123456789012345)" dir="ltr"
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none text-left">
                    <p class="text-xs text-gray-500">ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„ÙŠÙ‡ Ù…Ù† Facebook Events Manager</p>
                </div>

                <div class="space-y-3">
                    <h4 class="font-bold text-gray-800"><i class="fab fa-tiktok ml-2 text-gray-800"></i>TikTok Pixel</h4>
                    <input type="text" id="settingTikTokPixel" placeholder="TikTok Pixel ID (Ù…Ø«Ø§Ù„: XXXXXXXXXX)" dir="ltr"
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none text-left">
                    <p class="text-xs text-gray-500">ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„ÙŠÙ‡ Ù…Ù† TikTok Ads Manager</p>
                </div>

                <div class="space-y-3">
                    <h4 class="font-bold text-gray-800"><i class="fab fa-google ml-2 text-red-500"></i>Google Analytics</h4>
                    <input type="text" id="settingGoogleAnalytics" placeholder="Google Analytics ID (Ù…Ø«Ø§Ù„: G-XXXXXXXXXX)" dir="ltr"
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none text-left">
                    <p class="text-xs text-gray-500">ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„ÙŠÙ‡ Ù…Ù† Google Analytics</p>
                </div>

                <div class="space-y-3">
                    <h4 class="font-bold text-gray-800"><i class="fas fa-share-alt ml-2 text-purple-600"></i>Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ</h4>
                    <div class="grid grid-cols-1 gap-3">
                        <div class="flex items-center gap-2">
                            <div class="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center">
                                <i class="fab fa-facebook-f text-white"></i>
                            </div>
                            <input type="url" id="settingFacebook" placeholder="Ø±Ø§Ø¨Ø· ØµÙØ­Ø© Facebook" dir="ltr"
                                class="flex-1 px-4 py-2 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none text-left text-sm">
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-10 h-10 bg-gradient-to-br from-purple-600 via-pink-500 to-orange-400 rounded-lg flex items-center justify-center">
                                <i class="fab fa-instagram text-white"></i>
                            </div>
                            <input type="url" id="settingInstagram" placeholder="Ø±Ø§Ø¨Ø· Ø­Ø³Ø§Ø¨ Instagram" dir="ltr"
                                class="flex-1 px-4 py-2 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none text-left text-sm">
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-10 h-10 bg-black rounded-lg flex items-center justify-center">
                                <i class="fab fa-tiktok text-white"></i>
                            </div>
                            <input type="url" id="settingTiktokUrl" placeholder="Ø±Ø§Ø¨Ø· Ø­Ø³Ø§Ø¨ TikTok" dir="ltr"
                                class="flex-1 px-4 py-2 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none text-left text-sm">
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-10 h-10 bg-sky-500 rounded-lg flex items-center justify-center">
                                <i class="fab fa-twitter text-white"></i>
                            </div>
                            <input type="url" id="settingTwitter" placeholder="Ø±Ø§Ø¨Ø· Ø­Ø³Ø§Ø¨ Twitter/X" dir="ltr"
                                class="flex-1 px-4 py-2 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none text-left text-sm">
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-10 h-10 bg-red-600 rounded-lg flex items-center justify-center">
                                <i class="fab fa-youtube text-white"></i>
                            </div>
                            <input type="url" id="settingYoutube" placeholder="Ø±Ø§Ø¨Ø· Ù‚Ù†Ø§Ø© YouTube" dir="ltr"
                                class="flex-1 px-4 py-2 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none text-left text-sm">
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-10 h-10 bg-yellow-400 rounded-lg flex items-center justify-center">
                                <i class="fab fa-snapchat-ghost text-white"></i>
                            </div>
                            <input type="url" id="settingSnapchat" placeholder="Ø±Ø§Ø¨Ø· Ø­Ø³Ø§Ø¨ Snapchat" dir="ltr"
                                class="flex-1 px-4 py-2 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none text-left text-sm">
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center">
                                <i class="fab fa-telegram-plane text-white"></i>
                            </div>
                            <input type="url" id="settingTelegram" placeholder="Ø±Ø§Ø¨Ø· Ù‚Ù†Ø§Ø©/Ø­Ø³Ø§Ø¨ Telegram" dir="ltr"
                                class="flex-1 px-4 py-2 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none text-left text-sm">
                        </div>
                    </div>
                    <p class="text-xs text-gray-500">Ø£Ø¶Ù Ø±ÙˆØ§Ø¨Ø· Ø­Ø³Ø§Ø¨Ø§ØªÙƒ ÙˆØ³ØªØ¸Ù‡Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹</p>
                </div>

                <div class="space-y-3">
                    <h4 class="font-bold text-gray-800"><i class="fas fa-shield-alt ml-2 text-red-600"></i>Ø§Ù„Ø£Ù…Ø§Ù†</h4>
                    <input type="password" id="settingNewPassword" placeholder="ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø¬Ø¯ÙŠØ¯Ø©"
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                    <input type="password" id="settingConfirmPassword" placeholder="ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                </div>

                <button onclick="saveSettings()" class="w-full py-3 gradient-btn text-white font-bold rounded-xl">
                    <i class="fas fa-save ml-2"></i>Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
                </button>
            </div>
        </div>
    </div>

    <!-- Product Modal (Add/Edit) -->
    <div id="productModal" class="modal hidden fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50">
        <div class="bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto slide-in">
            <div class="gradient-bg p-4 flex items-center justify-between sticky top-0 z-10">
                <h3 id="productModalTitle" class="text-white font-bold text-lg"><i class="fas fa-plus ml-2"></i>Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h3>
                <button onclick="closeProductModal()" class="text-white hover:bg-white/20 rounded-full w-8 h-8 flex items-center justify-center">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="productForm" class="p-6 space-y-6">
                <input type="hidden" id="editProductId">
                
                <!-- Basic Info -->
                <div class="space-y-4">
                    <h4 class="font-bold text-gray-800 flex items-center gap-2">
                        <i class="fas fa-info-circle text-purple-600"></i>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£Ø³Ø§Ø³ÙŠØ©
                    </h4>
                    <input type="text" id="productName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ *" required
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                    <div class="grid grid-cols-2 gap-4">
                        <input type="number" id="productPriceInput" placeholder="Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ *" required
                            class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                        <input type="number" id="productOldPriceInput" placeholder="Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù‚Ø¯ÙŠÙ… *" required
                            class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <select id="productCategoryInput" required class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none bg-white">
                            <option value="">-- Ø§Ø®ØªØ± Ø§Ù„ØªØµÙ†ÙŠÙ --</option>
                            <option value="electronics">Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª</option>
                            <option value="fashion">Ù…Ù„Ø§Ø¨Ø³</option>
                            <option value="beauty">Ø¬Ù…Ø§Ù„</option>
                            <option value="home">Ø§Ù„Ù…Ù†Ø²Ù„</option>
                        </select>
                        <select id="productBadgeInput" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none bg-white">
                            <option value="">-- Ø¨Ø¯ÙˆÙ† Ø´Ø§Ø±Ø© --</option>
                            <option value="Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ø§Ù‹">Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ø§Ù‹</option>
                            <option value="Ø¬Ø¯ÙŠØ¯">Ø¬Ø¯ÙŠØ¯</option>
                            <option value="Ø¹Ø±Ø¶ Ø®Ø§Øµ">Ø¹Ø±Ø¶ Ø®Ø§Øµ</option>
                            <option value="ØªØ®ÙÙŠØ¶">ØªØ®ÙÙŠØ¶</option>
                        </select>
                    </div>
                    <textarea id="productDescInput" placeholder="ÙˆØµÙ Ø§Ù„Ù…Ù†ØªØ¬ *" required rows="3"
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none resize-none"></textarea>
                </div>

                <!-- Images -->
                <div class="space-y-4">
                    <h4 class="font-bold text-gray-800 flex items-center gap-2">
                        <i class="fas fa-images text-purple-600"></i>ØµÙˆØ± Ø§Ù„Ù…Ù†ØªØ¬
                    </h4>
                    <div id="imageDropZone" class="border-2 border-dashed border-gray-300 rounded-xl p-8 text-center cursor-pointer hover:border-purple-500 transition-colors">
                        <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-3"></i>
                        <p class="text-gray-600">Ø§Ø³Ø­Ø¨ Ø§Ù„ØµÙˆØ± Ù‡Ù†Ø§ Ø£Ùˆ Ø§Ù†Ù‚Ø± Ù„Ù„ØªØ­Ù…ÙŠÙ„</p>
                        <p class="text-gray-400 text-sm mt-1">PNG, JPG, WEBP (Ø­Ø¯ Ø£Ù‚ØµÙ‰ 5 ØµÙˆØ±)</p>
                        <input type="file" id="imageInput" accept="image/*" multiple class="hidden">
                    </div>
                    <div class="space-y-2">
                        <p class="text-sm text-gray-600">Ø£Ùˆ Ø£Ø¯Ø®Ù„ Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØµÙˆØ±:</p>
                        <div id="imageUrlInputs" class="space-y-2">
                            <div class="flex gap-2">
                                <input type="url" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© 1" dir="ltr"
                                    class="image-url-input flex-1 px-4 py-2 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none text-left">
                                <button type="button" onclick="addImageUrlInput()" class="px-4 py-2 bg-purple-100 text-purple-600 rounded-xl hover:bg-purple-200">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div id="imagePreviewContainer" class="flex flex-wrap gap-3"></div>
                </div>

                <!-- Specifications -->
                <div class="space-y-4">
                    <h4 class="font-bold text-gray-800 flex items-center gap-2">
                        <i class="fas fa-list text-purple-600"></i>Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª
                    </h4>
                    <div id="specsContainer" class="space-y-2">
                        <div class="flex gap-2 spec-row">
                            <input type="text" placeholder="Ø§Ù„Ù…ÙˆØ§ØµÙØ© (Ù…Ø«Ù„: Ø§Ù„Ù„ÙˆÙ†)" 
                                class="spec-key flex-1 px-4 py-2 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                            <input type="text" placeholder="Ø§Ù„Ù‚ÙŠÙ…Ø© (Ù…Ø«Ù„: Ø£Ø³ÙˆØ¯)" 
                                class="spec-value flex-1 px-4 py-2 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                            <button type="button" onclick="addSpecRow()" class="px-4 py-2 bg-purple-100 text-purple-600 rounded-xl hover:bg-purple-200">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="flex gap-4">
                    <button type="submit" class="flex-1 py-4 gradient-btn text-white font-bold text-lg rounded-xl">
                        <i class="fas fa-save ml-2"></i>Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬
                    </button>
                    <button type="button" onclick="closeProductModal()" class="px-8 py-4 bg-gray-200 text-gray-700 font-bold rounded-xl hover:bg-gray-300">
                        Ø¥Ù„ØºØ§Ø¡
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- WhatsApp Float Button -->
    <a id="whatsappBtn" href="#" target="_blank" 
        class="fixed bottom-6 left-6 z-40 w-14 h-14 bg-green-500 rounded-full flex items-center justify-center shadow-lg hover:bg-green-600 transition-all hover:scale-110">
        <i class="fab fa-whatsapp text-white text-2xl"></i>
    </a>

    <script>
        // ==================== Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ====================
        const CONFIG = {
            defaultPassword: 'admin123',
            storeName: 'Ù…ØªØ¬Ø±Ù†Ø§',
            phone: '0555123456',
            email: 'contact@store.dz',
            whatsapp: '213555123456'
        };

        // ==================== Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© ====================
        const defaultProducts = [
            { 
                id: 1, 
                name: "Ø³Ù…Ø§Ø¹Ø§Øª Ø¨Ù„ÙˆØªÙˆØ« Ù„Ø§Ø³Ù„ÙƒÙŠØ©", 
                price: 3500, 
                oldPrice: 4500, 
                images: [
                    "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=600&h=600&fit=crop",
                    "https://images.unsplash.com/photo-1484704849700-f032a568e944?w=600&h=600&fit=crop",
                    "https://images.unsplash.com/photo-1524678606370-a47ad25cb82a?w=600&h=600&fit=crop"
                ],
                category: "electronics", 
                badge: "Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ø§Ù‹",
                description: "Ø³Ù…Ø§Ø¹Ø§Øª Ø¨Ù„ÙˆØªÙˆØ« Ù„Ø§Ø³Ù„ÙƒÙŠØ© Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø¬ÙˆØ¯Ø© Ù…Ø¹ ØµÙˆØª Ù†Ù‚ÙŠ ÙˆØ¨Ø§Ø³ Ù‚ÙˆÙŠ. ØªØªÙ…ÙŠØ² Ø¨Ø¹Ù…Ø± Ø¨Ø·Ø§Ø±ÙŠØ© Ø·ÙˆÙŠÙ„ ÙŠØµÙ„ Ø¥Ù„Ù‰ 24 Ø³Ø§Ø¹Ø© ÙˆØªØµÙ…ÙŠÙ… Ù…Ø±ÙŠØ­ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠ.",
                specs: { "Ù†ÙˆØ¹ Ø§Ù„Ø§ØªØµØ§Ù„": "Ø¨Ù„ÙˆØªÙˆØ« 5.0", "Ø¹Ù…Ø± Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©": "24 Ø³Ø§Ø¹Ø©", "Ø§Ù„ÙˆØ²Ù†": "250 ØºØ±Ø§Ù…", "Ø§Ù„Ø¶Ù…Ø§Ù†": "Ø³Ù†Ø© ÙˆØ§Ø­Ø¯Ø©" }
            },
            { 
                id: 2, 
                name: "Ø³Ø§Ø¹Ø© Ø°ÙƒÙŠØ© Ù…ØªØ¹Ø¯Ø¯Ø© Ø§Ù„ÙˆØ¸Ø§Ø¦Ù", 
                price: 8500, 
                oldPrice: 12000, 
                images: [
                    "https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=600&h=600&fit=crop",
                    "https://images.unsplash.com/photo-1579586337278-3befd40fd17a?w=600&h=600&fit=crop"
                ],
                category: "electronics", 
                badge: "ØªØ®ÙÙŠØ¶",
                description: "Ø³Ø§Ø¹Ø© Ø°ÙƒÙŠØ© Ø£Ù†ÙŠÙ‚Ø© Ù…Ø¹ Ø´Ø§Ø´Ø© AMOLED ÙˆÙ…Ù‚Ø§ÙˆÙ…Ø© Ù„Ù„Ù…Ø§Ø¡.",
                specs: { "Ø§Ù„Ø´Ø§Ø´Ø©": "AMOLED 1.4 Ø¨ÙˆØµØ©", "Ù…Ù‚Ø§ÙˆÙ…Ø© Ø§Ù„Ù…Ø§Ø¡": "IP68", "Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©": "7 Ø£ÙŠØ§Ù…" }
            },
            { 
                id: 3, 
                name: "Ø­Ù‚ÙŠØ¨Ø© Ø¸Ù‡Ø± Ø¹ØµØ±ÙŠØ©", 
                price: 2800, 
                oldPrice: 3500, 
                images: [
                    "https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=600&h=600&fit=crop"
                ],
                category: "fashion", 
                badge: "",
                description: "Ø­Ù‚ÙŠØ¨Ø© Ø¸Ù‡Ø± Ø¹ØµØ±ÙŠØ© ÙˆÙ…Ø±ÙŠØ­Ø© Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„Ø¹Ù…Ù„ ÙˆØ§Ù„Ø³ÙØ±.",
                specs: { "Ø§Ù„Ù…Ø§Ø¯Ø©": "Ù‚Ù…Ø§Ø´ Ù…Ù‚Ø§ÙˆÙ… Ù„Ù„Ù…Ø§Ø¡", "Ø§Ù„Ø³Ø¹Ø©": "25 Ù„ØªØ±" }
            },
            { 
                id: 4, 
                name: "Ù†Ø¸Ø§Ø±Ø§Øª Ø´Ù…Ø³ÙŠØ© Ø£Ù†ÙŠÙ‚Ø©", 
                price: 1500, 
                oldPrice: 2000, 
                images: [
                    "https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=600&h=600&fit=crop"
                ],
                category: "fashion", 
                badge: "Ø¬Ø¯ÙŠØ¯",
                description: "Ù†Ø¸Ø§Ø±Ø§Øª Ø´Ù…Ø³ÙŠØ© Ø£Ù†ÙŠÙ‚Ø© Ø¨ØªØµÙ…ÙŠÙ… Ø¹ØµØ±ÙŠ.",
                specs: { "Ø§Ù„Ø­Ù…Ø§ÙŠØ©": "UV400", "Ø§Ù„Ù…Ø§Ø¯Ø©": "Ø¨Ù„Ø§Ø³ØªÙŠÙƒ Ø¹Ø§Ù„ÙŠ Ø§Ù„Ø¬ÙˆØ¯Ø©" }
            },
            { 
                id: 5, 
                name: "Ø¹Ø·Ø± ÙØ§Ø®Ø± Ù„Ù„Ø±Ø¬Ø§Ù„", 
                price: 4500, 
                oldPrice: 6000, 
                images: [
                    "https://images.unsplash.com/photo-1541643600914-78b084683601?w=600&h=600&fit=crop"
                ],
                category: "beauty", 
                badge: "",
                description: "Ø¹Ø·Ø± Ø±Ø¬Ø§Ù„ÙŠ ÙØ§Ø®Ø± Ø¨Ø±Ø§Ø¦Ø­Ø© Ø®Ø´Ø¨ÙŠØ© Ù…Ù…ÙŠØ²Ø©.",
                specs: { "Ø§Ù„Ø­Ø¬Ù…": "100 Ù…Ù„", "Ø§Ù„Ù†ÙˆØ¹": "Eau de Parfum" }
            },
            { 
                id: 6, 
                name: "Ù…ØµØ¨Ø§Ø­ LED Ø°ÙƒÙŠ", 
                price: 2200, 
                oldPrice: 3000, 
                images: [
                    "https://images.unsplash.com/photo-1507473885765-e6ed057f782c?w=600&h=600&fit=crop"
                ],
                category: "home", 
                badge: "",
                description: "Ù…ØµØ¨Ø§Ø­ LED Ø°ÙƒÙŠ ÙŠØªØ­ÙƒÙ… ÙÙŠÙ‡ Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚.",
                specs: { "Ø§Ù„Ù‚Ø¯Ø±Ø©": "9 ÙˆØ§Ø·", "Ø§Ù„Ø£Ù„ÙˆØ§Ù†": "16 Ù…Ù„ÙŠÙˆÙ† Ù„ÙˆÙ†" }
            }
        ];

        // ==================== Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª ====================
        const algeriaData = {
            1: { name: "Ø£Ø¯Ø±Ø§Ø±", office: 900, home: 1300 },
            2: { name: "Ø§Ù„Ø´Ù„Ù", office: 250, home: 650 },
            3: { name: "Ø§Ù„Ø£ØºÙˆØ§Ø·", office: 500, home: 800 },
            4: { name: "Ø£Ù… Ø§Ù„Ø¨ÙˆØ§Ù‚ÙŠ", office: 300, home: 650 },
            5: { name: "Ø¨Ø§ØªÙ†Ø©", office: 700, home: 1000 },
            6: { name: "Ø¨Ø¬Ø§ÙŠØ©", office: 600, home: 900 },
            7: { name: "Ø¨Ø³ÙƒØ±Ø©", office: 750, home: 1050 },
            8: { name: "Ø¨Ø´Ø§Ø±", office: 900, home: 1200 },
            9: { name: "Ø§Ù„Ø¨Ù„ÙŠØ¯Ø©", office: 400, home: 600 },
            10: { name: "Ø§Ù„Ø¨ÙˆÙŠØ±Ø©", office: 550, home: 850 },
            11: { name: "ØªÙ…Ù†Ø±Ø§Ø³Øª", office: 1000, home: 1400 },
            12: { name: "ØªØ¨Ø³Ø©", office: 750, home: 1050 },
            13: { name: "ØªÙ„Ù…Ø³Ø§Ù†", office: 650, home: 950 },
            14: { name: "ØªÙŠØ§Ø±Øª", office: 650, home: 950 },
            15: { name: "ØªÙŠØ²ÙŠ ÙˆØ²Ùˆ", office: 500, home: 800 },
            16: { name: "Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±", office: 350, home: 500 },
            17: { name: "Ø§Ù„Ø¬Ù„ÙØ©", office: 700, home: 1000 },
            18: { name: "Ø¬ÙŠØ¬Ù„", office: 650, home: 950 },
            19: { name: "Ø³Ø·ÙŠÙ", office: 600, home: 900 },
            20: { name: "Ø³Ø¹ÙŠØ¯Ø©", office: 650, home: 950 },
            21: { name: "Ø³ÙƒÙŠÙƒØ¯Ø©", office: 600, home: 900 },
            22: { name: "Ø³ÙŠØ¯ÙŠ Ø¨Ù„Ø¹Ø¨Ø§Ø³", office: 650, home: 950 },
            23: { name: "Ø¹Ù†Ø§Ø¨Ø©", office: 700, home: 1000 },
            24: { name: "Ù‚Ø§Ù„Ù…Ø©", office: 750, home: 1050 },
            25: { name: "Ù‚Ø³Ù†Ø·ÙŠÙ†Ø©", office: 450, home: 700 },
            26: { name: "Ø§Ù„Ù…Ø¯ÙŠØ©", office: 550, home: 850 },
            27: { name: "Ù…Ø³ØªØºØ§Ù†Ù…", office: 600, home: 900 },
            28: { name: "Ø§Ù„Ù…Ø³ÙŠÙ„Ø©", office: 700, home: 1000 },
            29: { name: "Ù…Ø¹Ø³ÙƒØ±", office: 650, home: 950 },
            30: { name: "ÙˆØ±Ù‚Ù„Ø©", office: 850, home: 1150 },
            31: { name: "ÙˆÙ‡Ø±Ø§Ù†", office: 400, home: 600 },
            32: { name: "Ø§Ù„Ø¨ÙŠØ¶", office: 800, home: 1100 },
            33: { name: "Ø¥Ù„ÙŠØ²ÙŠ", office: 900, home: 1200 },
            34: { name: "Ø¨Ø±Ø¬ Ø¨ÙˆØ¹Ø±ÙŠØ±ÙŠØ¬", office: 650, home: 950 },
            35: { name: "Ø¨ÙˆÙ…Ø±Ø¯Ø§Ø³", office: 450, home: 700 },
            36: { name: "Ø§Ù„Ø·Ø§Ø±Ù", office: 700, home: 1000 },
            37: { name: "ØªÙ†Ø¯ÙˆÙ", office: 1000, home: 1400 },
            38: { name: "ØªÙŠØ³Ù…Ø³ÙŠÙ„Øª", office: 650, home: 950 },
            39: { name: "Ø§Ù„ÙˆØ§Ø¯ÙŠ", office: 800, home: 1100 },
            40: { name: "Ø®Ù†Ø´Ù„Ø©", office: 750, home: 1050 },
            41: { name: "Ø³ÙˆÙ‚ Ø£Ù‡Ø±Ø§Ø³", office: 700, home: 1000 },
            42: { name: "ØªÙŠØ¨Ø§Ø²Ø©", office: 450, home: 700 },
            43: { name: "Ù…ÙŠÙ„Ø©", office: 650, home: 950 },
            44: { name: "Ø¹ÙŠÙ† Ø§Ù„Ø¯ÙÙ„Ù‰", office: 550, home: 850 },
            45: { name: "Ø§Ù„Ù†Ø¹Ø§Ù…Ø©", office: 700, home: 1000 },
            46: { name: "Ø¹ÙŠÙ† ØªÙ…ÙˆØ´Ù†Øª", office: 550, home: 850 },
            47: { name: "ØºØ±Ø¯Ø§ÙŠØ©", office: 850, home: 1150 },
            48: { name: "ØºÙ„ÙŠØ²Ø§Ù†", office: 600, home: 900 },
            49: { name: "ØªÙŠÙ…ÙŠÙ…ÙˆÙ†", office: 850, home: 1150 },
            50: { name: "Ø¨Ø±Ø¬ Ø¨Ø§Ø¬ÙŠ Ù…Ø®ØªØ§Ø±", office: 900, home: 1200 },
            51: { name: "Ø£ÙˆÙ„Ø§Ø¯ Ø¬Ù„Ø§Ù„", office: 900, home: 1200 },
            52: { name: "Ø¨Ù†ÙŠ Ø¹Ø¨Ø§Ø³", office: 900, home: 1200 },
            53: { name: "Ø¹ÙŠÙ† ØµØ§Ù„Ø­", office: 850, home: 1150 },
            54: { name: "Ø¹ÙŠÙ† Ù‚Ø²Ø§Ù…", office: 900, home: 1200 },
            55: { name: "ØªÙ‚Ø±Øª", office: 800, home: 1100 },
            56: { name: "Ø¬Ø§Ù†Øª", office: 900, home: 1200 },
            57: { name: "Ø§Ù„Ù…ØºÙŠØ±", office: 850, home: 1150 },
            58: { name: "Ø§Ù„Ù…Ù†ÙŠØ¹Ø©", office: 850, home: 1150 }
        };

        // ==================== Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© ====================
        let products = JSON.parse(localStorage.getItem('storeProducts')) || [...defaultProducts];
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let orders = JSON.parse(localStorage.getItem('orders')) || [];
        let settings = JSON.parse(localStorage.getItem('storeSettings')) || CONFIG;
        let isAdmin = false;
        let currentProduct = null;
        let productQuantity = 1;
        let uploadedImages = [];

        // ==================== Ø¯ÙˆØ§Ù„ Ø§Ù„Ø£Ù…Ø§Ù† ====================
        function sanitizeInput(input) {
            if (typeof input !== 'string') return input;
            return input.replace(/[<>"'&]/g, (char) => {
                const entities = { '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#x27;', '&': '&amp;' };
                return entities[char];
            });
        }

        function validatePhone(phone) {
            return /^0[567][0-9]{8}$/.test(phone);
        }

        function validateEmail(email) {
            if (!email) return true;
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        function generateOrderId() {
            const date = new Date();
            const random = Math.floor(Math.random() * 1000).toString().padStart(3, '0');
            return `ORD-${date.getFullYear()}${(date.getMonth()+1).toString().padStart(2,'0')}${date.getDate().toString().padStart(2,'0')}-${random}`;
        }

        function hashPassword(password) {
            let hash = 0;
            for (let i = 0; i < password.length; i++) {
                const char = password.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash;
            }
            return hash.toString();
        }

        // ==================== Ø¯ÙˆØ§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ====================
        function showNotification(message, type = 'success') {
            const container = document.getElementById('notificationContainer');
            const notification = document.createElement('div');
            const colors = { success: 'bg-green-500', error: 'bg-red-500', warning: 'bg-yellow-500', info: 'bg-blue-500' };
            notification.className = `notification ${colors[type]} text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-2`;
            notification.innerHTML = `<i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'times-circle' : 'info-circle'}"></i>${message}`;
            container.appendChild(notification);
            setTimeout(() => notification.remove(), 4000);
        }

        // ==================== Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ====================
        function saveProducts() {
            localStorage.setItem('storeProducts', JSON.stringify(products));
        }

        function getNextProductId() {
            return products.length > 0 ? Math.max(...products.map(p => p.id)) + 1 : 1;
        }

        function renderProducts(category = 'all') {
            const grid = document.getElementById('productsGrid');
            const filtered = category === 'all' ? products : products.filter(p => p.category === category);
            document.getElementById('productCount').textContent = `${filtered.length} Ù…Ù†ØªØ¬`;
            
            grid.innerHTML = filtered.map(product => {
                const discount = Math.round((1 - product.price / product.oldPrice) * 100);
                return `
                    <div class="product-card bg-white rounded-2xl overflow-hidden shadow-md cursor-pointer" onclick="viewProduct(${product.id})">
                        <div class="relative">
                            <img src="${product.images[0]}" alt="${product.name}" class="w-full h-40 md:h-48 object-cover" onerror="this.src='https://via.placeholder.com/400x400?text=No+Image'">
                            ${product.badge ? `<span class="absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full">${product.badge}</span>` : ''}
                            <span class="absolute top-2 left-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full">-${discount}%</span>
                        </div>
                        <div class="p-3 md:p-4">
                            <h4 class="font-semibold text-gray-800 text-sm md:text-base mb-2 line-clamp-2">${product.name}</h4>
                            <div class="flex items-center gap-2 flex-wrap mb-3">
                                <span class="text-lg md:text-xl font-bold text-green-600">${product.price.toLocaleString('ar-DZ')} Ø¯Ø¬</span>
                                <span class="text-xs md:text-sm text-gray-400 line-through">${product.oldPrice.toLocaleString('ar-DZ')} Ø¯Ø¬</span>
                            </div>
                            <button onclick="event.stopPropagation(); viewProduct(${product.id})" class="w-full py-2 gradient-btn text-white font-semibold rounded-xl text-sm">
                                <i class="fas fa-eye ml-1"></i>Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // ==================== ØµÙØ­Ø© Ø§Ù„Ù…Ù†ØªØ¬ ====================
        function viewProduct(productId) {
            currentProduct = products.find(p => p.id === productId);
            if (!currentProduct) return;

            productQuantity = 1;
            const discount = Math.round((1 - currentProduct.price / currentProduct.oldPrice) * 100);
            const categoryNames = { electronics: 'Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª', fashion: 'Ù…Ù„Ø§Ø¨Ø³', beauty: 'Ø¬Ù…Ø§Ù„', home: 'Ø§Ù„Ù…Ù†Ø²Ù„' };

            document.getElementById('productBreadcrumb').textContent = currentProduct.name;
            document.getElementById('productCategory').textContent = categoryNames[currentProduct.category] || currentProduct.category;
            document.getElementById('mainProductImage').src = currentProduct.images[0];
            document.getElementById('productBadge').textContent = currentProduct.badge || '';
            document.getElementById('productBadge').style.display = currentProduct.badge ? 'block' : 'none';
            document.getElementById('discountBadge').textContent = `-${discount}%`;

            document.getElementById('thumbnailContainer').innerHTML = currentProduct.images.map((img, index) => `
                <img src="${img}" onclick="changeMainImage('${img}', this)" 
                    class="thumbnail w-16 h-16 md:w-20 md:h-20 object-cover rounded-lg border-2 ${index === 0 ? 'active border-purple-500' : 'border-gray-200'} cursor-pointer"
                    onerror="this.src='https://via.placeholder.com/100x100?text=No+Image'">
            `).join('');

            document.getElementById('productTitle').textContent = currentProduct.name;
            document.getElementById('productPrice').textContent = currentProduct.price.toLocaleString('ar-DZ') + ' Ø¯Ø¬';
            document.getElementById('productOldPrice').textContent = currentProduct.oldPrice.toLocaleString('ar-DZ') + ' Ø¯Ø¬';
            document.getElementById('productDiscount').textContent = `-${discount}%`;
            document.getElementById('productDescription').textContent = currentProduct.description;
            document.getElementById('productQty').textContent = '1';

            showTab('description');
            loadRelatedProducts();
            showPage('product');
            window.scrollTo(0, 0);
            
            // ØªØªØ¨Ø¹ Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ù…Ù†ØªØ¬
            trackViewContent(currentProduct);
        }

        function changeMainImage(src, element) {
            document.getElementById('mainProductImage').src = src;
            document.querySelectorAll('.thumbnail').forEach(t => t.classList.remove('active', 'border-purple-500'));
            element.classList.add('active', 'border-purple-500');
        }

        function changeProductQty(change) {
            productQuantity = Math.max(1, Math.min(10, productQuantity + change));
            document.getElementById('productQty').textContent = productQuantity;
        }

        function showTab(tabName) {
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active', 'text-purple-600', 'border-b-2', 'border-purple-600');
                btn.classList.add('text-gray-500');
            });
            event.target.classList.add('active', 'text-purple-600', 'border-b-2', 'border-purple-600');
            event.target.classList.remove('text-gray-500');

            let content = '';
            if (tabName === 'description') {
                content = `<p class="text-gray-600 leading-relaxed">${currentProduct.description}</p>`;
            } else if (tabName === 'specs') {
                const specs = currentProduct.specs || {};
                content = `<div class="space-y-3">
                    ${Object.entries(specs).map(([key, value]) => `
                        <div class="flex justify-between py-2 border-b">
                            <span class="font-semibold text-gray-700">${key}</span>
                            <span class="text-gray-600">${value}</span>
                        </div>
                    `).join('')}
                </div>`;
            } else if (tabName === 'reviews') {
                content = `<div class="text-center text-gray-500 py-8"><i class="fas fa-comments text-4xl mb-4"></i><p>Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø¨Ø¹Ø¯</p></div>`;
            }
            document.getElementById('tabContent').innerHTML = content;
        }

        function loadRelatedProducts() {
            const related = products.filter(p => p.category === currentProduct.category && p.id !== currentProduct.id).slice(0, 4);
            document.getElementById('relatedProducts').innerHTML = related.map(product => {
                const discount = Math.round((1 - product.price / product.oldPrice) * 100);
                return `
                    <div class="product-card bg-white rounded-2xl overflow-hidden shadow-md cursor-pointer" onclick="viewProduct(${product.id})">
                        <div class="relative">
                            <img src="${product.images[0]}" alt="${product.name}" class="w-full h-32 md:h-40 object-cover">
                            <span class="absolute top-2 left-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full">-${discount}%</span>
                        </div>
                        <div class="p-3">
                            <h4 class="font-semibold text-gray-800 text-sm mb-2 line-clamp-1">${product.name}</h4>
                            <span class="text-lg font-bold text-green-600">${product.price.toLocaleString('ar-DZ')} Ø¯Ø¬</span>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function shareProduct(platform) {
            const url = window.location.href;
            const text = `${currentProduct.name} - ${currentProduct.price} Ø¯Ø¬`;
            let shareUrl = '';
            if (platform === 'facebook') shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;
            else if (platform === 'whatsapp') shareUrl = `https://wa.me/?text=${encodeURIComponent(text + ' ' + url)}`;
            else if (platform === 'twitter') shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`;
            window.open(shareUrl, '_blank');
        }

        function copyProductLink() {
            navigator.clipboard.writeText(window.location.href);
            showNotification('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·', 'success');
        }

        function buyNowFromProduct() {
            if (!currentProduct) return;
            cart = [{ ...currentProduct, quantity: productQuantity }];
            saveCart();
            updateCartCount();
            openOrderModal();
        }

        function addToCartFromProduct() {
            if (!currentProduct) return;
            const existing = cart.find(item => item.id === currentProduct.id);
            if (existing) existing.quantity += productQuantity;
            else cart.push({ ...currentProduct, quantity: productQuantity });
            saveCart();
            updateCartCount();
            showNotification('ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ø³Ù„Ø©', 'success');
            
            // ØªØªØ¨Ø¹ Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©
            trackAddToCart(currentProduct, productQuantity);
        }

        // ==================== Ø§Ù„Ø³Ù„Ø© ====================
        function saveCart() { localStorage.setItem('cart', JSON.stringify(cart)); }
        function updateCartCount() {
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            const badge = document.getElementById('cartCount');
            badge.textContent = count;
            badge.classList.toggle('hidden', count === 0);
        }
        function openCart() { document.getElementById('cartModal').classList.remove('hidden'); renderCart(); }
        function closeCart() { document.getElementById('cartModal').classList.add('hidden'); }

        function renderCart() {
            const container = document.getElementById('cartItems');
            const footer = document.getElementById('cartFooter');
            if (cart.length === 0) {
                container.innerHTML = '<div class="text-center py-8 text-gray-500"><i class="fas fa-shopping-cart text-4xl mb-4"></i><p>Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©</p></div>';
                footer.innerHTML = '';
                return;
            }
            container.innerHTML = cart.map(item => `
                <div class="flex gap-3 p-3 bg-gray-50 rounded-xl mb-3">
                    <img src="${item.images[0]}" class="w-16 h-16 object-cover rounded-lg">
                    <div class="flex-1">
                        <h4 class="font-semibold text-sm">${item.name}</h4>
                        <p class="text-green-600 font-bold">${item.price.toLocaleString('ar-DZ')} Ø¯Ø¬</p>
                        <div class="flex items-center gap-2 mt-1">
                            <button onclick="updateCartQty(${item.id}, -1)" class="w-6 h-6 rounded-full bg-gray-200">-</button>
                            <span class="font-semibold">${item.quantity}</span>
                            <button onclick="updateCartQty(${item.id}, 1)" class="w-6 h-6 rounded-full bg-gray-200">+</button>
                            <button onclick="removeFromCart(${item.id})" class="mr-auto text-red-500"><i class="fas fa-trash"></i></button>
                        </div>
                    </div>
                </div>
            `).join('');
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            footer.innerHTML = `
                <div class="flex justify-between items-center mb-4">
                    <span class="font-bold">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:</span>
                    <span class="text-xl font-bold text-purple-600">${total.toLocaleString('ar-DZ')} Ø¯Ø¬</span>
                </div>
                <button onclick="checkoutCart()" class="w-full py-3 gradient-btn text-white font-bold rounded-xl">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</button>
            `;
        }

        function updateCartQty(id, change) {
            const item = cart.find(i => i.id === id);
            if (item) { item.quantity = Math.max(1, item.quantity + change); saveCart(); renderCart(); }
        }
        function removeFromCart(id) { cart = cart.filter(i => i.id !== id); saveCart(); updateCartCount(); renderCart(); }
        function checkoutCart() { if (cart.length === 0) { showNotification('Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©', 'error'); return; } closeCart(); openOrderModal(); }

        // ==================== Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø·Ù„Ø¨ ====================
        function openOrderModal() {
            document.getElementById('orderModal').classList.remove('hidden');
            document.getElementById('orderForm').reset();
            document.getElementById('orderForm').style.display = 'block';
            document.getElementById('orderSuccess').classList.add('hidden');
            document.getElementById('orderProductSection').style.display = 'block';
            renderOrderProducts();
            initProvinces();
            
            // ØªØªØ¨Ø¹ Ø¨Ø¯Ø¡ Ø§Ù„Ø´Ø±Ø§Ø¡
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            trackInitiateCheckout(cart, total);
        }
        function closeOrderModal() { document.getElementById('orderModal').classList.add('hidden'); }

        function renderOrderProducts() {
            document.getElementById('orderProductSection').innerHTML = cart.map(item => `
                <div class="flex gap-3 p-3 bg-gray-50 rounded-xl mb-2">
                    <img src="${item.images[0]}" class="w-16 h-16 object-cover rounded-lg">
                    <div><h4 class="font-semibold text-sm">${item.name}</h4><p class="text-green-600 font-bold">${item.price.toLocaleString('ar-DZ')} Ø¯Ø¬ Ã— ${item.quantity}</p></div>
                </div>
            `).join('');
            updateOrderSummary();
        }

        function initProvinces() {
            const select = document.getElementById('province');
            select.innerHTML = '<option value="">-- Ø§Ø®ØªØ± Ø§Ù„ÙˆÙ„Ø§ÙŠØ© --</option>';
            for (let i = 1; i <= 58; i++) {
                if (algeriaData[i]) select.innerHTML += `<option value="${i}">${i} - ${algeriaData[i].name}</option>`;
            }
        }

        document.getElementById('province').addEventListener('change', function() {
            const code = this.value;
            if (code && algeriaData[code]) {
                document.getElementById('officePrice').textContent = algeriaData[code].office.toLocaleString('ar-DZ') + ' Ø¯Ø¬';
                document.getElementById('homePrice').textContent = algeriaData[code].home.toLocaleString('ar-DZ') + ' Ø¯Ø¬';
            } else {
                document.getElementById('officePrice').textContent = '-- Ø¯Ø¬';
                document.getElementById('homePrice').textContent = '-- Ø¯Ø¬';
            }
            updateOrderSummary();
        });

        document.querySelectorAll('.delivery-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.delivery-option').forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                this.querySelector('input').checked = true;
                updateOrderSummary();
            });
        });

        function updateOrderSummary() {
            const provinceCode = document.getElementById('province').value;
            const deliveryType = document.querySelector('input[name="deliveryType"]:checked');
            let subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            let deliveryPrice = 0;
            if (provinceCode && algeriaData[provinceCode] && deliveryType) {
                deliveryPrice = deliveryType.value === 'office' ? algeriaData[provinceCode].office : algeriaData[provinceCode].home;
            }
            document.getElementById('orderSummaryItems').innerHTML = `
                <div class="flex justify-between"><span>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</span><span class="font-semibold">${subtotal.toLocaleString('ar-DZ')} Ø¯Ø¬</span></div>
                <div class="flex justify-between"><span>Ø§Ù„ØªÙˆØµÙŠÙ„:</span><span class="font-semibold">${deliveryPrice.toLocaleString('ar-DZ')} Ø¯Ø¬</span></div>
            `;
            document.getElementById('orderTotal').textContent = (subtotal + deliveryPrice).toLocaleString('ar-DZ') + ' Ø¯Ø¬';
        }

        document.getElementById('orderForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const name = sanitizeInput(document.getElementById('customerName').value.trim());
            const phone = document.getElementById('customerPhone').value.trim();
            const email = document.getElementById('customerEmail').value.trim();
            const provinceCode = document.getElementById('province').value;
            const municipality = sanitizeInput(document.getElementById('municipality').value.trim());
            const address = sanitizeInput(document.getElementById('address').value.trim());
            const deliveryType = document.querySelector('input[name="deliveryType"]:checked');

            if (!validatePhone(phone)) { showNotification('Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ØºÙŠØ± ØµØ­ÙŠØ­', 'error'); return; }
            if (!validateEmail(email)) { showNotification('Ø§Ù„Ø¨Ø±ÙŠØ¯ ØºÙŠØ± ØµØ­ÙŠØ­', 'error'); return; }
            if (!deliveryType) { showNotification('Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„ØªÙˆØµÙŠÙ„', 'error'); return; }

            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const deliveryPrice = deliveryType.value === 'office' ? algeriaData[provinceCode].office : algeriaData[provinceCode].home;

            const order = {
                id: generateOrderId(),
                date: new Date().toISOString(),
                customer: { name, phone, email },
                address: { province: algeriaData[provinceCode].name, provinceCode, municipality, details: address, deliveryType: deliveryType.value === 'office' ? 'Ù…ÙƒØªØ¨' : 'Ù…Ù†Ø²Ù„' },
                items: cart.map(item => ({ id: item.id, name: item.name, price: item.price, quantity: item.quantity })),
                subtotal, deliveryPrice, total: subtotal + deliveryPrice, status: 'pending'
            };

            orders.push(order);
            localStorage.setItem('orders', JSON.stringify(orders));

            document.getElementById('submitOrderBtn').innerHTML = '<div class="loading-spinner mx-auto"></div>';
            document.getElementById('submitOrderBtn').disabled = true;

            await sendToGoogleSheets(order);
            await sendEmailNotification(order);

            document.getElementById('orderForm').style.display = 'none';
            document.getElementById('orderProductSection').style.display = 'none';
            document.getElementById('orderSuccess').classList.remove('hidden');
            document.getElementById('orderNumber').textContent = order.id;
            document.getElementById('orderConfirmationDetails').innerHTML = `
                <div class="space-y-2">
                    <div class="flex justify-between"><span>Ø§Ù„Ø§Ø³Ù…:</span><span class="font-semibold">${order.customer.name}</span></div>
                    <div class="flex justify-between"><span>Ø§Ù„Ù‡Ø§ØªÙ:</span><span class="font-semibold" dir="ltr">${order.customer.phone}</span></div>
                    <div class="flex justify-between"><span>Ø§Ù„ÙˆÙ„Ø§ÙŠØ©:</span><span class="font-semibold">${order.address.province}</span></div>
                    <div class="flex justify-between text-lg font-bold text-purple-600"><span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:</span><span>${order.total.toLocaleString('ar-DZ')} Ø¯Ø¬</span></div>
                </div>
            `;

            sendWhatsAppNotification(order);
            
            // ØªØªØ¨Ø¹ Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡
            trackPurchase(order);
            
            cart = [];
            saveCart();
            updateCartCount();
            showNotification('ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
        });

        async function sendToGoogleSheets(order) {
            if (!settings.sheetUrl) return;
            try {
                await fetch(settings.sheetUrl, {
                    method: 'POST', mode: 'no-cors',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        orderId: order.id, date: new Date(order.date).toLocaleString('ar-DZ'),
                        customerName: order.customer.name, phone: order.customer.phone,
                        province: order.address.province, municipality: order.address.municipality,
                        deliveryType: order.address.deliveryType,
                        products: order.items.map(i => `${i.name} (Ã—${i.quantity})`).join(' | '),
                        total: order.total, status: 'Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±'
                    })
                });
            } catch (e) { console.error(e); }
        }

        async function sendEmailNotification(order) {
            if (!settings.emailJsKey || !settings.emailJsService || !settings.emailJsTemplate) return;
            try {
                emailjs.init(settings.emailJsKey);
                await emailjs.send(settings.emailJsService, settings.emailJsTemplate, {
                    order_id: order.id, customer_name: order.customer.name, customer_phone: order.customer.phone,
                    province: order.address.province, total: order.total.toLocaleString('ar-DZ') + ' Ø¯Ø¬'
                });
            } catch (e) { console.error(e); }
        }

        function sendWhatsAppNotification(order) {
            const message = `ğŸ›’ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯\n\nğŸ“‹ Ø±Ù‚Ù…: ${order.id}\nğŸ‘¤ ${order.customer.name}\nğŸ“ ${order.customer.phone}\nğŸ“ ${order.address.province} - ${order.address.municipality}\nğŸ’° ${order.total.toLocaleString('ar-DZ')} Ø¯Ø¬`;
            window.open(`https://wa.me/${settings.whatsapp}?text=${encodeURIComponent(message)}`, '_blank');
        }

        // ==================== ØªØªØ¨Ø¹ Ø§Ù„Ø·Ù„Ø¨ ====================
        function trackOrder() {
            const orderId = document.getElementById('trackOrderId').value.trim();
            const phone = document.getElementById('trackPhone').value.trim();
            const order = orders.find(o => o.id === orderId && o.customer.phone === phone);
            const resultDiv = document.getElementById('trackResult');
            if (order) {
                const statusLabels = { pending: 'Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±', confirmed: 'Ù…Ø¤ÙƒØ¯', shipped: 'ØªÙ… Ø§Ù„Ø´Ø­Ù†', delivered: 'ØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„', cancelled: 'Ù…Ù„ØºÙŠ' };
                resultDiv.innerHTML = `<div class="bg-gray-50 rounded-xl p-4"><p class="font-bold">${order.id}</p><p>Ø§Ù„Ø­Ø§Ù„Ø©: ${statusLabels[order.status]}</p><p>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${order.total.toLocaleString('ar-DZ')} Ø¯Ø¬</p></div>`;
            } else {
                resultDiv.innerHTML = `<div class="bg-red-50 text-red-600 p-4 rounded-xl text-center">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨</div>`;
            }
            resultDiv.classList.remove('hidden');
        }

        // ==================== Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… ====================
        function showAdminLogin() {
            if (isAdmin) { showPage('admin'); return; }
            document.getElementById('adminLoginModal').classList.remove('hidden');
        }
        function closeAdminLogin() { document.getElementById('adminLoginModal').classList.add('hidden'); }

        document.getElementById('adminLoginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const password = document.getElementById('adminPassword').value;
            const storedHash = localStorage.getItem('adminPasswordHash') || hashPassword(CONFIG.defaultPassword);
            if (hashPassword(password) === storedHash) {
                isAdmin = true;
                closeAdminLogin();
                showPage('admin');
                loadAdminData();
                showNotification('Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ', 'success');
            } else {
                showNotification('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©', 'error');
            }
        });

        function logoutAdmin() { isAdmin = false; showPage('home'); showNotification('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬', 'info'); }

        function showAdminTab(tab) {
            document.querySelectorAll('.admin-tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById('ordersTab').classList.toggle('hidden', tab !== 'orders');
            document.getElementById('productsTab').classList.toggle('hidden', tab !== 'products');
            if (tab === 'products') renderAdminProducts();
        }

        function loadAdminData() {
            document.getElementById('statTotal').textContent = orders.length;
            document.getElementById('statPending').textContent = orders.filter(o => o.status === 'pending').length;
            document.getElementById('statDelivered').textContent = orders.filter(o => o.status === 'delivered').length;
            document.getElementById('statRevenue').textContent = orders.filter(o => o.status === 'delivered').reduce((sum, o) => sum + o.total, 0).toLocaleString('ar-DZ');
            renderOrdersTable();
        }

        function renderOrdersTable(filtered = null) {
            const data = filtered || orders;
            const statusLabels = { pending: { text: 'Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±', class: 'bg-yellow-100 text-yellow-800' }, confirmed: { text: 'Ù…Ø¤ÙƒØ¯', class: 'bg-green-100 text-green-800' }, shipped: { text: 'ØªÙ… Ø§Ù„Ø´Ø­Ù†', class: 'bg-blue-100 text-blue-800' }, delivered: { text: 'ØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„', class: 'bg-green-100 text-green-800' }, cancelled: { text: 'Ù…Ù„ØºÙŠ', class: 'bg-red-100 text-red-800' } };
            document.getElementById('ordersTableBody').innerHTML = data.sort((a, b) => new Date(b.date) - new Date(a.date)).map(order => `
                <tr class="hover:bg-gray-50">
                    <td class="px-4 py-3 font-mono text-sm">${order.id}</td>
                    <td class="px-4 py-3"><div class="font-semibold">${order.customer.name}</div><div class="text-xs text-gray-500" dir="ltr">${order.customer.phone}</div></td>
                    <td class="px-4 py-3 text-sm">${order.items.map(i => i.name).join(', ').substring(0, 30)}...</td>
                    <td class="px-4 py-3 font-bold text-green-600">${order.total.toLocaleString('ar-DZ')} Ø¯Ø¬</td>
                    <td class="px-4 py-3">
                        <select onchange="updateOrderStatus('${order.id}', this.value)" class="text-xs px-2 py-1 rounded-full ${statusLabels[order.status].class}">
                            <option value="pending" ${order.status === 'pending' ? 'selected' : ''}>Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</option>
                            <option value="confirmed" ${order.status === 'confirmed' ? 'selected' : ''}>Ù…Ø¤ÙƒØ¯</option>
                            <option value="shipped" ${order.status === 'shipped' ? 'selected' : ''}>ØªÙ… Ø§Ù„Ø´Ø­Ù†</option>
                            <option value="delivered" ${order.status === 'delivered' ? 'selected' : ''}>ØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„</option>
                            <option value="cancelled" ${order.status === 'cancelled' ? 'selected' : ''}>Ù…Ù„ØºÙŠ</option>
                        </select>
                    </td>
                    <td class="px-4 py-3 text-sm text-gray-500">${new Date(order.date).toLocaleDateString('ar-DZ')}</td>
                    <td class="px-4 py-3">
                        <button onclick="viewOrderDetails('${order.id}')" class="text-blue-500 hover:text-blue-700 ml-2"><i class="fas fa-eye"></i></button>
                        <button onclick="deleteOrder('${order.id}')" class="text-red-500 hover:text-red-700"><i class="fas fa-trash"></i></button>
                    </td>
                </tr>
            `).join('');
        }

        function updateOrderStatus(orderId, status) {
            const order = orders.find(o => o.id === orderId);
            if (order) { order.status = status; localStorage.setItem('orders', JSON.stringify(orders)); loadAdminData(); showNotification('ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«', 'success'); }
        }

        function viewOrderDetails(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (!order) return;
            document.getElementById('orderDetailsContent').innerHTML = `
                <div class="space-y-4">
                    <div class="bg-gray-50 rounded-xl p-4"><h4 class="font-bold mb-2">Ø§Ù„Ø¹Ù…ÙŠÙ„</h4><p>${order.customer.name}</p><p dir="ltr">${order.customer.phone}</p></div>
                    <div class="bg-gray-50 rounded-xl p-4"><h4 class="font-bold mb-2">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</h4><p>${order.address.province} - ${order.address.municipality}</p><p>${order.address.deliveryType}</p></div>
                    <div class="bg-purple-50 rounded-xl p-4"><div class="font-bold text-purple-600">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${order.total.toLocaleString('ar-DZ')} Ø¯Ø¬</div></div>
                </div>
            `;
            document.getElementById('orderDetailsModal').classList.remove('hidden');
        }
        function closeOrderDetails() { document.getElementById('orderDetailsModal').classList.add('hidden'); }
        function deleteOrder(orderId) { if (confirm('Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø·Ù„Ø¨ØŸ')) { orders = orders.filter(o => o.id !== orderId); localStorage.setItem('orders', JSON.stringify(orders)); loadAdminData(); showNotification('ØªÙ… Ø§Ù„Ø­Ø°Ù', 'success'); } }
        function filterOrders() {
            let filtered = orders;
            const status = document.getElementById('filterStatus').value;
            const date = document.getElementById('filterDate').value;
            if (status !== 'all') filtered = filtered.filter(o => o.status === status);
            if (date) filtered = filtered.filter(o => o.date.startsWith(date));
            renderOrdersTable(filtered);
        }
        function exportOrders() {
            let csv = 'Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨,Ø§Ù„Ø¹Ù…ÙŠÙ„,Ø§Ù„Ù‡Ø§ØªÙ,Ø§Ù„ÙˆÙ„Ø§ÙŠØ©,Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹,Ø§Ù„Ø­Ø§Ù„Ø©\n';
            orders.forEach(o => { csv += `${o.id},${o.customer.name},${o.customer.phone},${o.address.province},${o.total},${o.status}\n`; });
            const blob = new Blob(['\ufeff' + csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `orders_${new Date().toISOString().split('T')[0]}.csv`;
            link.click();
            showNotification('ØªÙ… Ø§Ù„ØªØµØ¯ÙŠØ±', 'success');
        }

        // ==================== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ====================
        function renderAdminProducts() {
            document.getElementById('statProducts').textContent = products.length;
            document.getElementById('statElectronics').textContent = products.filter(p => p.category === 'electronics').length;
            document.getElementById('statFashion').textContent = products.filter(p => p.category === 'fashion').length;
            document.getElementById('statOther').textContent = products.filter(p => !['electronics', 'fashion'].includes(p.category)).length;

            document.getElementById('adminProductsGrid').innerHTML = products.map(product => `
                <div class="bg-white rounded-xl shadow-md overflow-hidden">
                    <div class="relative">
                        <img src="${product.images[0]}" alt="${product.name}" class="w-full h-48 object-cover" onerror="this.src='https://via.placeholder.com/400x300?text=No+Image'">
                        ${product.badge ? `<span class="absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full">${product.badge}</span>` : ''}
                    </div>
                    <div class="p-4">
                        <h4 class="font-bold text-gray-800 mb-2">${product.name}</h4>
                        <div class="flex items-center gap-2 mb-3">
                            <span class="text-lg font-bold text-green-600">${product.price.toLocaleString('ar-DZ')} Ø¯Ø¬</span>
                            <span class="text-sm text-gray-400 line-through">${product.oldPrice.toLocaleString('ar-DZ')} Ø¯Ø¬</span>
                        </div>
                        <div class="flex gap-2">
                            <button onclick="editProduct(${product.id})" class="flex-1 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                                <i class="fas fa-edit ml-1"></i>ØªØ¹Ø¯ÙŠÙ„
                            </button>
                            <button onclick="deleteProduct(${product.id})" class="flex-1 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600">
                                <i class="fas fa-trash ml-1"></i>Ø­Ø°Ù
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function openProductModal(productId = null) {
            document.getElementById('productModal').classList.remove('hidden');
            document.getElementById('productForm').reset();
            document.getElementById('editProductId').value = '';
            document.getElementById('imagePreviewContainer').innerHTML = '';
            document.getElementById('imageUrlInputs').innerHTML = `
                <div class="flex gap-2">
                    <input type="url" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© 1" dir="ltr" class="image-url-input flex-1 px-4 py-2 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none text-left">
                    <button type="button" onclick="addImageUrlInput()" class="px-4 py-2 bg-purple-100 text-purple-600 rounded-xl hover:bg-purple-200"><i class="fas fa-plus"></i></button>
                </div>
            `;
            document.getElementById('specsContainer').innerHTML = `
                <div class="flex gap-2 spec-row">
                    <input type="text" placeholder="Ø§Ù„Ù…ÙˆØ§ØµÙØ©" class="spec-key flex-1 px-4 py-2 border-2 border-gray-200 rounded-xl">
                    <input type="text" placeholder="Ø§Ù„Ù‚ÙŠÙ…Ø©" class="spec-value flex-1 px-4 py-2 border-2 border-gray-200 rounded-xl">
                    <button type="button" onclick="addSpecRow()" class="px-4 py-2 bg-purple-100 text-purple-600 rounded-xl"><i class="fas fa-plus"></i></button>
                </div>
            `;
            uploadedImages = [];
            document.getElementById('productModalTitle').innerHTML = '<i class="fas fa-plus ml-2"></i>Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯';
        }

        function closeProductModal() { document.getElementById('productModal').classList.add('hidden'); }

        function editProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            openProductModal();
            document.getElementById('productModalTitle').innerHTML = '<i class="fas fa-edit ml-2"></i>ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬';
            document.getElementById('editProductId').value = product.id;
            document.getElementById('productName').value = product.name;
            document.getElementById('productPriceInput').value = product.price;
            document.getElementById('productOldPriceInput').value = product.oldPrice;
            document.getElementById('productCategoryInput').value = product.category;
            document.getElementById('productBadgeInput').value = product.badge || '';
            document.getElementById('productDescInput').value = product.description;

            // Load images
            document.getElementById('imageUrlInputs').innerHTML = '';
            product.images.forEach((img, index) => {
                document.getElementById('imageUrlInputs').innerHTML += `
                    <div class="flex gap-2">
                        <input type="url" value="${img}" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© ${index + 1}" dir="ltr" class="image-url-input flex-1 px-4 py-2 border-2 border-gray-200 rounded-xl text-left">
                        <button type="button" onclick="${index === 0 ? 'addImageUrlInput()' : 'this.parentElement.remove()'}" class="px-4 py-2 bg-purple-100 text-purple-600 rounded-xl">
                            <i class="fas fa-${index === 0 ? 'plus' : 'times'}"></i>
                        </button>
                    </div>
                `;
            });

            // Load specs
            const specs = product.specs || {};
            const specsEntries = Object.entries(specs);
            document.getElementById('specsContainer').innerHTML = '';
            specsEntries.forEach(([key, value], index) => {
                document.getElementById('specsContainer').innerHTML += `
                    <div class="flex gap-2 spec-row">
                        <input type="text" value="${key}" placeholder="Ø§Ù„Ù…ÙˆØ§ØµÙØ©" class="spec-key flex-1 px-4 py-2 border-2 border-gray-200 rounded-xl">
                        <input type="text" value="${value}" placeholder="Ø§Ù„Ù‚ÙŠÙ…Ø©" class="spec-value flex-1 px-4 py-2 border-2 border-gray-200 rounded-xl">
                        <button type="button" onclick="${index === 0 ? 'addSpecRow()' : 'this.parentElement.remove()'}" class="px-4 py-2 bg-purple-100 text-purple-600 rounded-xl">
                            <i class="fas fa-${index === 0 ? 'plus' : 'times'}"></i>
                        </button>
                    </div>
                `;
            });
            if (specsEntries.length === 0) addSpecRow();
        }

        function addImageUrlInput() {
            const container = document.getElementById('imageUrlInputs');
            const count = container.querySelectorAll('.image-url-input').length + 1;
            container.innerHTML += `
                <div class="flex gap-2">
                    <input type="url" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© ${count}" dir="ltr" class="image-url-input flex-1 px-4 py-2 border-2 border-gray-200 rounded-xl text-left">
                    <button type="button" onclick="this.parentElement.remove()" class="px-4 py-2 bg-red-100 text-red-600 rounded-xl"><i class="fas fa-times"></i></button>
                </div>
            `;
        }

        function addSpecRow() {
            document.getElementById('specsContainer').innerHTML += `
                <div class="flex gap-2 spec-row">
                    <input type="text" placeholder="Ø§Ù„Ù…ÙˆØ§ØµÙØ©" class="spec-key flex-1 px-4 py-2 border-2 border-gray-200 rounded-xl">
                    <input type="text" placeholder="Ø§Ù„Ù‚ÙŠÙ…Ø©" class="spec-value flex-1 px-4 py-2 border-2 border-gray-200 rounded-xl">
                    <button type="button" onclick="this.parentElement.remove()" class="px-4 py-2 bg-red-100 text-red-600 rounded-xl"><i class="fas fa-times"></i></button>
                </div>
            `;
        }

        // Image upload handling
        const dropZone = document.getElementById('imageDropZone');
        const imageInput = document.getElementById('imageInput');

        dropZone.addEventListener('click', () => imageInput.click());
        dropZone.addEventListener('dragover', (e) => { e.preventDefault(); dropZone.classList.add('drag-over'); });
        dropZone.addEventListener('dragleave', () => dropZone.classList.remove('drag-over'));
        dropZone.addEventListener('drop', (e) => { e.preventDefault(); dropZone.classList.remove('drag-over'); handleFiles(e.dataTransfer.files); });
        imageInput.addEventListener('change', (e) => handleFiles(e.target.files));

        function handleFiles(files) {
            Array.from(files).slice(0, 5 - uploadedImages.length).forEach(file => {
                if (!file.type.startsWith('image/')) return;
                const reader = new FileReader();
                reader.onload = (e) => {
                    uploadedImages.push(e.target.result);
                    renderImagePreviews();
                };
                reader.readAsDataURL(file);
            });
        }

        function renderImagePreviews() {
            document.getElementById('imagePreviewContainer').innerHTML = uploadedImages.map((img, index) => `
                <div class="image-preview w-20 h-20 rounded-lg overflow-hidden">
                    <img src="${img}" class="w-full h-full object-cover">
                    <button type="button" onclick="removeUploadedImage(${index})" class="remove-btn w-6 h-6 bg-red-500 text-white rounded-full text-xs">Ã—</button>
                </div>
            `).join('');
        }

        function removeUploadedImage(index) {
            uploadedImages.splice(index, 1);
            renderImagePreviews();
        }

        document.getElementById('productForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const editId = document.getElementById('editProductId').value;
            const name = sanitizeInput(document.getElementById('productName').value.trim());
            const price = parseInt(document.getElementById('productPriceInput').value);
            const oldPrice = parseInt(document.getElementById('productOldPriceInput').value);
            const category = document.getElementById('productCategoryInput').value;
            const badge = document.getElementById('productBadgeInput').value;
            const description = sanitizeInput(document.getElementById('productDescInput').value.trim());

            // Get images from URL inputs
            const imageUrls = Array.from(document.querySelectorAll('.image-url-input'))
                .map(input => input.value.trim())
                .filter(url => url);

            // Combine with uploaded images
            const images = [...uploadedImages, ...imageUrls];
            if (images.length === 0) {
                showNotification('Ø£Ø¶Ù ØµÙˆØ±Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„', 'error');
                return;
            }

            // Get specs
            const specs = {};
            document.querySelectorAll('.spec-row').forEach(row => {
                const key = row.querySelector('.spec-key').value.trim();
                const value = row.querySelector('.spec-value').value.trim();
                if (key && value) specs[key] = value;
            });

            if (editId) {
                // Update existing product
                const index = products.findIndex(p => p.id === parseInt(editId));
                if (index !== -1) {
                    products[index] = { ...products[index], name, price, oldPrice, category, badge, description, images, specs };
                    showNotification('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬', 'success');
                }
            } else {
                // Add new product
                products.push({
                    id: getNextProductId(),
                    name, price, oldPrice, category, badge, description, images, specs
                });
                showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬', 'success');
            }

            saveProducts();
            closeProductModal();
            renderAdminProducts();
            renderProducts();
        });

        function deleteProduct(productId) {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ØŸ')) {
                products = products.filter(p => p.id !== productId);
                saveProducts();
                renderAdminProducts();
                renderProducts();
                showNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬', 'success');
            }
        }

        // ==================== Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ====================
        function openSettings() {
            document.getElementById('settingStoreName').value = settings.storeName || '';
            document.getElementById('settingPhone').value = settings.phone || '';
            document.getElementById('settingEmail').value = settings.email || '';
            document.getElementById('settingWhatsapp').value = settings.whatsapp || '';
            document.getElementById('settingEmailJsKey').value = settings.emailJsKey || '';
            document.getElementById('settingEmailJsService').value = settings.emailJsService || '';
            document.getElementById('settingEmailJsTemplate').value = settings.emailJsTemplate || '';
            document.getElementById('settingSheetUrl').value = settings.sheetUrl || '';
            document.getElementById('settingFacebookPixel').value = settings.facebookPixel || '';
            document.getElementById('settingTikTokPixel').value = settings.tiktokPixel || '';
            document.getElementById('settingGoogleAnalytics').value = settings.googleAnalytics || '';
            // Social Media Links
            document.getElementById('settingFacebook').value = settings.facebookUrl || '';
            document.getElementById('settingInstagram').value = settings.instagramUrl || '';
            document.getElementById('settingTiktokUrl').value = settings.tiktokUrl || '';
            document.getElementById('settingTwitter').value = settings.twitterUrl || '';
            document.getElementById('settingYoutube').value = settings.youtubeUrl || '';
            document.getElementById('settingSnapchat').value = settings.snapchatUrl || '';
            document.getElementById('settingTelegram').value = settings.telegramUrl || '';
            document.getElementById('settingsModal').classList.remove('hidden');
        }
        function closeSettings() { document.getElementById('settingsModal').classList.add('hidden'); }

        function saveSettings() {
            settings.storeName = document.getElementById('settingStoreName').value;
            settings.phone = document.getElementById('settingPhone').value;
            settings.email = document.getElementById('settingEmail').value;
            settings.whatsapp = document.getElementById('settingWhatsapp').value;
            settings.emailJsKey = document.getElementById('settingEmailJsKey').value;
            settings.emailJsService = document.getElementById('settingEmailJsService').value;
            settings.emailJsTemplate = document.getElementById('settingEmailJsTemplate').value;
            settings.sheetUrl = document.getElementById('settingSheetUrl').value;
            settings.facebookPixel = document.getElementById('settingFacebookPixel').value;
            settings.tiktokPixel = document.getElementById('settingTikTokPixel').value;
            settings.googleAnalytics = document.getElementById('settingGoogleAnalytics').value;
            // Social Media Links
            settings.facebookUrl = document.getElementById('settingFacebook').value;
            settings.instagramUrl = document.getElementById('settingInstagram').value;
            settings.tiktokUrl = document.getElementById('settingTiktokUrl').value;
            settings.twitterUrl = document.getElementById('settingTwitter').value;
            settings.youtubeUrl = document.getElementById('settingYoutube').value;
            settings.snapchatUrl = document.getElementById('settingSnapchat').value;
            settings.telegramUrl = document.getElementById('settingTelegram').value;

            const newPassword = document.getElementById('settingNewPassword').value;
            const confirmPassword = document.getElementById('settingConfirmPassword').value;
            if (newPassword && newPassword === confirmPassword) {
                localStorage.setItem('adminPasswordHash', hashPassword(newPassword));
            }

            localStorage.setItem('storeSettings', JSON.stringify(settings));
            updateWhatsAppButton();
            updateFooterSocialLinks();
            updateFooterInfo();
            initializePixels(); // Ø¥Ø¹Ø§Ø¯Ø© ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¨ÙŠÙƒØ³Ù„Ø§Øª
            closeSettings();
            showNotification('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª', 'success');
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ ÙÙŠ Ø§Ù„ÙÙˆØªØ±
        function updateFooterSocialLinks() {
            const container = document.getElementById('footerSocialLinks');
            const socialLinks = [
                { url: settings.facebookUrl, icon: 'fab fa-facebook-f', bg: 'bg-blue-600' },
                { url: settings.instagramUrl, icon: 'fab fa-instagram', bg: 'bg-gradient-to-br from-purple-600 via-pink-500 to-orange-400' },
                { url: settings.tiktokUrl, icon: 'fab fa-tiktok', bg: 'bg-black' },
                { url: settings.twitterUrl, icon: 'fab fa-twitter', bg: 'bg-sky-500' },
                { url: settings.youtubeUrl, icon: 'fab fa-youtube', bg: 'bg-red-600' },
                { url: settings.snapchatUrl, icon: 'fab fa-snapchat-ghost', bg: 'bg-yellow-400' },
                { url: settings.telegramUrl, icon: 'fab fa-telegram-plane', bg: 'bg-blue-500' },
                { url: settings.whatsapp ? `https://wa.me/${settings.whatsapp}` : '', icon: 'fab fa-whatsapp', bg: 'bg-green-500' }
            ];
            
            const linksHtml = socialLinks
                .filter(link => link.url)
                .map(link => `
                    <a href="${link.url}" target="_blank" rel="noopener noreferrer" 
                       class="w-10 h-10 ${link.bg} rounded-full flex items-center justify-center hover:opacity-80 hover:scale-110 transition-all">
                        <i class="${link.icon} text-white"></i>
                    </a>
                `).join('');
            
            container.innerHTML = linksHtml || '<p class="text-purple-200 text-sm">Ù„Ù… ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø±ÙˆØ§Ø¨Ø· Ø¨Ø¹Ø¯</p>';
        }
        
        // ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙÙˆØªØ±
        function updateFooterInfo() {
            if (settings.phone) document.getElementById('footerPhone').textContent = settings.phone;
            if (settings.email) document.getElementById('footerEmail').textContent = settings.email;
        }
        
        // ØªÙ‡ÙŠØ¦Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠÙƒØ³Ù„Ø§Øª
        function initializePixels() {
            if (settings.facebookPixel) initFacebookPixel(settings.facebookPixel);
            if (settings.tiktokPixel) initTikTokPixel(settings.tiktokPixel);
            if (settings.googleAnalytics) initGoogleAnalytics(settings.googleAnalytics);
        }
        
        // ØªØªØ¨Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØµØ§Øª - Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ù…Ù†ØªØ¬
        function trackViewContent(product) {
            fbTrackViewContent(product);
            ttTrackViewContent(product);
            gaTrackViewItem(product);
        }
        
        // ØªØªØ¨Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØµØ§Øª - Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©
        function trackAddToCart(product, quantity) {
            fbTrackAddToCart(product, quantity);
            ttTrackAddToCart(product, quantity);
            gaTrackAddToCart(product, quantity);
        }
        
        // ØªØªØ¨Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØµØ§Øª - Ø¨Ø¯Ø¡ Ø§Ù„Ø´Ø±Ø§Ø¡
        function trackInitiateCheckout(cart, total) {
            fbTrackInitiateCheckout(cart, total);
            ttTrackInitiateCheckout(cart, total);
            gaTrackBeginCheckout(cart, total);
        }
        
        // ØªØªØ¨Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØµØ§Øª - Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡
        function trackPurchase(order) {
            fbTrackPurchase(order);
            ttTrackCompletePayment(order);
            gaTrackPurchase(order);
        }

        function updateWhatsAppButton() {
            document.getElementById('whatsappBtn').href = `https://wa.me/${settings.whatsapp}`;
        }

        // ==================== Ø§Ù„ØªÙ†Ù‚Ù„ ====================
        function showPage(page) {
            document.getElementById('homePage').classList.add('hidden');
            document.getElementById('productPage').classList.add('hidden');
            document.getElementById('trackPage').classList.add('hidden');
            document.getElementById('adminPage').classList.add('hidden');

            if (page === 'home') document.getElementById('homePage').classList.remove('hidden');
            else if (page === 'product') document.getElementById('productPage').classList.remove('hidden');
            else if (page === 'track') document.getElementById('trackPage').classList.remove('hidden');
            else if (page === 'admin') {
                if (!isAdmin) { showAdminLogin(); return; }
                document.getElementById('adminPage').classList.remove('hidden');
                loadAdminData();
            }
        }

        // ==================== Ø§Ù„ØªÙ‡ÙŠØ¦Ø© ====================
        document.querySelectorAll('.category-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                renderProducts(this.dataset.category);
            });
        });

        document.getElementById('searchInput').addEventListener('input', function(e) {
            const query = e.target.value.toLowerCase();
            const filtered = products.filter(p => p.name.toLowerCase().includes(query));
            const grid = document.getElementById('productsGrid');
            document.getElementById('productCount').textContent = `${filtered.length} Ù…Ù†ØªØ¬`;
            grid.innerHTML = filtered.map(product => {
                const discount = Math.round((1 - product.price / product.oldPrice) * 100);
                return `
                    <div class="product-card bg-white rounded-2xl overflow-hidden shadow-md cursor-pointer" onclick="viewProduct(${product.id})">
                        <div class="relative">
                            <img src="${product.images[0]}" alt="${product.name}" class="w-full h-40 md:h-48 object-cover">
                            ${product.badge ? `<span class="absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full">${product.badge}</span>` : ''}
                            <span class="absolute top-2 left-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full">-${discount}%</span>
                        </div>
                        <div class="p-3 md:p-4">
                            <h4 class="font-semibold text-gray-800 text-sm md:text-base mb-2">${product.name}</h4>
                            <div class="flex items-center gap-2 mb-3">
                                <span class="text-lg font-bold text-green-600">${product.price.toLocaleString('ar-DZ')} Ø¯Ø¬</span>
                                <span class="text-sm text-gray-400 line-through">${product.oldPrice.toLocaleString('ar-DZ')} Ø¯Ø¬</span>
                            </div>
                            <button onclick="event.stopPropagation(); viewProduct(${product.id})" class="w-full py-2 gradient-btn text-white font-semibold rounded-xl text-sm">Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬</button>
                        </div>
                    </div>
                `;
            }).join('');
        });

        // Initialize
        renderProducts();
        updateCartCount();
        updateWhatsAppButton();
        updateFooterSocialLinks();
        updateFooterInfo();
        initializePixels(); // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¨ÙŠÙƒØ³Ù„Ø§Øª Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    </script>
</body>
</html>
